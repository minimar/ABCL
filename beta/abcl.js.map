{"version":3,"file":"abcl.js","sources":["../node_modules/bondage-club-mod-sdk/dist/bcmodsdk.js","../src/core/logger.ts","../src/types/definitions.ts","../src/types/types.ts","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_baseFor.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/merge.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/_isIterateeCall.js","../src/core/settings.ts","../src/core/utils.ts","../src/core/pendingRequest.ts","../src/core/player/playerUtils.ts","../src/core/player/ui.ts","../src/core/player/player.ts","../src/core/player/diaper.ts","../src/core/hooks.ts","../src/core/bcUI.ts","../src/screens/Settings/index.ts","../src/screens/styles/css.ts","../src/core/data/activities-data.ts","../src/core/activities.ts","../src/core/minigames.ts","../src/core/globalExpose.ts","../src/main.ts","../src/screens/index.ts"],"sourcesContent":["// Bondage Club Mod Development Kit (1.2.0)\n// For more info see: https://github.com/Jomshir98/bondage-club-mod-sdk\n/** @type {ModSDKGlobalAPI} */\nvar bcModSdk=function(){\"use strict\";const o=\"1.2.0\";function e(o){alert(\"Mod ERROR:\\n\"+o);const e=new Error(o);throw console.error(e),e}const t=new TextEncoder;function n(o){return!!o&&\"object\"==typeof o&&!Array.isArray(o)}function r(o){const e=new Set;return o.filter((o=>!e.has(o)&&e.add(o)))}const i=new Map,a=new Set;function c(o){a.has(o)||(a.add(o),console.warn(o))}function s(o){const e=[],t=new Map,n=new Set;for(const r of f.values()){const i=r.patching.get(o.name);if(i){e.push(...i.hooks);for(const[e,a]of i.patches.entries())t.has(e)&&t.get(e)!==a&&c(`ModSDK: Mod '${r.name}' is patching function ${o.name} with same pattern that is already applied by different mod, but with different pattern:\\nPattern:\\n${e}\\nPatch1:\\n${t.get(e)||\"\"}\\nPatch2:\\n${a}`),t.set(e,a),n.add(r.name)}}e.sort(((o,e)=>e.priority-o.priority));const r=function(o,e){if(0===e.size)return o;let t=o.toString().replaceAll(\"\\r\\n\",\"\\n\");for(const[n,r]of e.entries())t.includes(n)||c(`ModSDK: Patching ${o.name}: Patch ${n} not applied`),t=t.replaceAll(n,r);return(0,eval)(`(${t})`)}(o.original,t);let i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookChainExit)||void 0===i?void 0:i.call(t,o.name,n),c=r.apply(this,e);return null==a||a(),c};for(let t=e.length-1;t>=0;t--){const n=e[t],r=i;i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookEnter)||void 0===i?void 0:i.call(t,o.name,n.mod),c=n.hook.apply(this,[e,o=>{if(1!==arguments.length||!Array.isArray(e))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof o}`);return r.call(this,o)}]);return null==a||a(),c}}return{hooks:e,patches:t,patchesSources:n,enter:i,final:r}}function l(o,e=!1){let r=i.get(o);if(r)e&&(r.precomputed=s(r));else{let e=window;const a=o.split(\".\");for(let t=0;t<a.length-1;t++)if(e=e[a[t]],!n(e))throw new Error(`ModSDK: Function ${o} to be patched not found; ${a.slice(0,t+1).join(\".\")} is not object`);const c=e[a[a.length-1]];if(\"function\"!=typeof c)throw new Error(`ModSDK: Function ${o} to be patched not found`);const l=function(o){let e=-1;for(const n of t.encode(o)){let o=255&(e^n);for(let e=0;e<8;e++)o=1&o?-306674912^o>>>1:o>>>1;e=e>>>8^o}return((-1^e)>>>0).toString(16).padStart(8,\"0\").toUpperCase()}(c.toString().replaceAll(\"\\r\\n\",\"\\n\")),d={name:o,original:c,originalHash:l};r=Object.assign(Object.assign({},d),{precomputed:s(d),router:()=>{},context:e,contextProperty:a[a.length-1]}),r.router=function(o){return function(...e){return o.precomputed.enter.apply(this,[e])}}(r),i.set(o,r),e[r.contextProperty]=r.router}return r}function d(){for(const o of i.values())o.precomputed=s(o)}function p(){const o=new Map;for(const[e,t]of i)o.set(e,{name:e,original:t.original,originalHash:t.originalHash,sdkEntrypoint:t.router,currentEntrypoint:t.context[t.contextProperty],hookedByMods:r(t.precomputed.hooks.map((o=>o.mod))),patchedByMods:Array.from(t.precomputed.patchesSources)});return o}const f=new Map;function u(o){f.get(o.name)!==o&&e(`Failed to unload mod '${o.name}': Not registered`),f.delete(o.name),o.loaded=!1,d()}function g(o,t){o&&\"object\"==typeof o||e(\"Failed to register mod: Expected info object, got \"+typeof o),\"string\"==typeof o.name&&o.name||e(\"Failed to register mod: Expected name to be non-empty string, got \"+typeof o.name);let r=`'${o.name}'`;\"string\"==typeof o.fullName&&o.fullName||e(`Failed to register mod ${r}: Expected fullName to be non-empty string, got ${typeof o.fullName}`),r=`'${o.fullName} (${o.name})'`,\"string\"!=typeof o.version&&e(`Failed to register mod ${r}: Expected version to be string, got ${typeof o.version}`),o.repository||(o.repository=void 0),void 0!==o.repository&&\"string\"!=typeof o.repository&&e(`Failed to register mod ${r}: Expected repository to be undefined or string, got ${typeof o.version}`),null==t&&(t={}),t&&\"object\"==typeof t||e(`Failed to register mod ${r}: Expected options to be undefined or object, got ${typeof t}`);const i=!0===t.allowReplace,a=f.get(o.name);a&&(a.allowReplace&&i||e(`Refusing to load mod ${r}: it is already loaded and doesn't allow being replaced.\\nWas the mod loaded multiple times?`),u(a));const c=o=>{let e=g.patching.get(o.name);return e||(e={hooks:[],patches:new Map},g.patching.set(o.name,e)),e},s=(o,t)=>(...n)=>{var i,a;const c=null===(a=(i=m.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(i,o,g.name);g.loaded||e(`Mod ${r} attempted to call SDK function after being unloaded`);const s=t(...n);return null==c||c(),s},p={unload:s(\"unload\",(()=>u(g))),hookFunction:s(\"hookFunction\",((o,t,n)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);\"number\"!=typeof t&&e(`Mod ${r} failed to hook function '${o}': Expected priority number, got ${typeof t}`),\"function\"!=typeof n&&e(`Mod ${r} failed to hook function '${o}': Expected hook function, got ${typeof n}`);const s={mod:g.name,priority:t,hook:n};return a.hooks.push(s),d(),()=>{const o=a.hooks.indexOf(s);o>=0&&(a.hooks.splice(o,1),d())}})),patchFunction:s(\"patchFunction\",((o,t)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);n(t)||e(`Mod ${r} failed to patch function '${o}': Expected patches object, got ${typeof t}`);for(const[n,i]of Object.entries(t))\"string\"==typeof i?a.patches.set(n,i):null===i?a.patches.delete(n):e(`Mod ${r} failed to patch function '${o}': Invalid format of patch '${n}'`);d()})),removePatches:s(\"removePatches\",(o=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const t=l(o);c(t).patches.clear(),d()})),callOriginal:s(\"callOriginal\",((o,t,n)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to call a function: Expected function name string, got ${typeof o}`);const i=l(o);return Array.isArray(t)||e(`Mod ${r} failed to call a function: Expected args array, got ${typeof t}`),i.original.apply(null!=n?n:globalThis,t)})),getOriginalHash:s(\"getOriginalHash\",(o=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to get hash: Expected function name string, got ${typeof o}`);return l(o).originalHash}))},g={name:o.name,fullName:o.fullName,version:o.version,repository:o.repository,allowReplace:i,api:p,loaded:!0,patching:new Map};return f.set(o.name,g),Object.freeze(p)}function h(){const o=[];for(const e of f.values())o.push({name:e.name,fullName:e.fullName,version:e.version,repository:e.repository});return o}let m;const y=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:o,apiVersion:1,registerMod:g,getModsInfo:h,getPatchingInfo:p,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return m=e,Object.freeze(e)}():(n(window.bcModSdk)||e(\"Failed to init Mod SDK: Name already in use\"),1!==window.bcModSdk.apiVersion&&e(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==o&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);return\"undefined\"!=typeof exports&&(Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=y),y}();\n","class Logger {\r\n  private logs: Array<{\r\n    level: string;\r\n    timestamp: string;\r\n    message: any;\r\n  }> = [];\r\n  private maxLogSize: number = 100;\r\n\r\n  private log(\r\n    level: string,\r\n    message: any,\r\n    logFunction: (...args: any[]) => void\r\n  ) {\r\n    const timestamp = new Date().toISOString();\r\n    const logEntry = {\r\n      message,\r\n      level,\r\n      version: modVersion,\r\n      timestamp,\r\n    };\r\n\r\n    logFunction(\r\n      `%c${modIdentifier}:`,\r\n      `font-weight: bold; color: #f6cbde;`,\r\n      logEntry\r\n    );\r\n\r\n    this.logs.push(logEntry);\r\n\r\n    if (this.logs.length > this.maxLogSize) {\r\n      this.logs.shift();\r\n    }\r\n  }\r\n\r\n  info(message: any) {\r\n    this.log(\"INFO\", message, console.log);\r\n  }\r\n\r\n  debug(message: any) {\r\n    this.log(\"DEBUG\", message, console.debug);\r\n  }\r\n\r\n  warn(message: any) {\r\n    this.log(\"WARN\", message, console.warn);\r\n  }\r\n\r\n  error(message: any) {\r\n    this.log(\"ERROR\", message, console.error);\r\n  }\r\n\r\n  getLogs() {\r\n    return this.logs;\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n","export const ModVersion = modVersion;\r\nexport const ModName = modName;\r\nexport const ModRepo = modRepo;\r\nexport const ModIdentifier = modIdentifier;\r\nexport const PublicURL = publicURL;\r\n","import { PendingRequest } from \"../core/pendingRequest\";\r\n\r\nexport type PartialDeep<T> = {\r\n  [P in keyof T]?: PartialDeep<T[P]>;\r\n};\r\n\r\nexport type SyncEntry = {\r\n  type: \"sync\";\r\n  settings: ModSettings;\r\n  stats: ModStats;\r\n  target?: number;\r\n};\r\nexport type InitEntry = {\r\n  type: \"init\";\r\n};\r\nexport type RequestEntry = {\r\n  type: \"pendingRequest\";\r\n  state: typeof PendingRequest.prototype.state;\r\n  identifier: typeof PendingRequest.prototype.type;\r\n  id: typeof PendingRequest.prototype.id;\r\n};\r\nexport type ChangeDiaperRequestEntry = Omit<RequestEntry, \"type\"> & {\r\n  type: \"changeDiaper\";\r\n};\r\nexport type MessageEntry =\r\n  | SyncEntry\r\n  | InitEntry\r\n  | RequestEntry\r\n  | ChangeDiaperRequestEntry;\r\n\r\nexport interface PluginServerChatRoomMessage extends ServerChatRoomMessageBase {\r\n  /** The character to target the message at. null means it's broadcast to the room. */\r\n  Target?: number;\r\n  Content: ServerChatRoomMessageContentType;\r\n  Type: ServerChatRoomMessageType;\r\n  Dictionary?: {\r\n    message: MessageEntry;\r\n  }[];\r\n  Timeout?: number;\r\n}\r\nexport type PreferenceActivity = {\r\n  self: number;\r\n  other: number;\r\n  isSelfExclusive: boolean;\r\n};\r\n\r\nexport type ModScreen = {\r\n  id: string;\r\n  module: string;\r\n  functions: ScreenFunctions;\r\n};\r\n\r\nexport enum PermissionLevels {\r\n  Anyone = 0,\r\n  ItemPermission = 1,\r\n  Friends = 2,\r\n  Lovers = 3,\r\n  // TODO: Mistress = 4 Perhaps counts mistress as BCX Mistresses, BCC Caretakers, etc\r\n  Owner = 5, // TODO: Consider BCX owners, BCC Mommies, etc\r\n  Self = 6,\r\n}\r\n\r\n/** Overall structure for additional data */\r\nexport type AbclData = {\r\n  DiaperSizeScale: {\r\n    [key: string]: number;\r\n  };\r\n  Diapers: {\r\n    [key: string]: {\r\n      primaryColor?: number;\r\n      secondaryColor?: number;\r\n      size: number;\r\n    };\r\n  };\r\n  DiaperColors: {\r\n    [key: string]: string;\r\n  };\r\n  BabyClothes: string[];\r\n};\r\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import { merge } from \"lodash-es\";\r\nimport { PartialDeep, PermissionLevels } from \"../types/types\";\r\nimport { sendUpdateMyData as sendUpdateMyData } from \"./hooks\";\r\nimport { logger } from \"./logger\";\r\n\r\nexport const defaultSettings: ModSettings = {\r\n  Metabolism: {\r\n    value: \"Normal\",\r\n    permission: {\r\n      canView: PermissionLevels.Anyone,\r\n      canModify: PermissionLevels.Owner,\r\n    },\r\n  },\r\n  DisableWetting: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner, // maybe it could be used to signal to other players that this player does not like wetting\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  DisableSoiling: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner,\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  CaregiverIDs: {\r\n    value: [],\r\n    permission: {\r\n      canView: PermissionLevels.Anyone, // if this is not set to anyone then it would mean only those that fit the permission level could be caregivers, however it could be a good thing\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  OpenRemoteSettings: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Anyone, // this should probably always be visible\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  LockedOutOfSettings: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner,\r\n      canModify: PermissionLevels.Self, // if value becomes true then the player wouldn't be able to turn it off, we should warn for this\r\n    },\r\n  },\r\n};\r\n\r\nexport const defaultStats: ModStats = {\r\n  Bladder: {\r\n    value: 0, // in ml\r\n    size: 300, // in ml, quite arbitrary\r\n  },\r\n  Bowel: {\r\n    value: 0, // in ml\r\n    size: 200, // in ml\r\n  },\r\n  Soiliness: {\r\n    value: 0, // in ml\r\n  },\r\n  Wetness: {\r\n    value: 0, // in ml\r\n  },\r\n  WaterIntake: {\r\n    value: 300 / 20, // accident every 20 minutes\r\n  },\r\n  FoodIntake: {\r\n    value: 200 / 60,\r\n  },\r\n  Incontinence: {\r\n    value: 0,\r\n  },\r\n  MentalRegression: {\r\n    value: 0,\r\n  },\r\n};\r\nconst defaultData: ModStorageModel = {\r\n  Settings: defaultSettings,\r\n  Stats: defaultStats,\r\n};\r\n\r\nexport const mutateData = (newData: PartialDeep<ModStorageModel>) => {\r\n  Player[modIdentifier] = merge(Player[modIdentifier] || defaultData, newData);\r\n  saveData();\r\n};\r\n\r\nlet dataSaveTimeout: number | null = null;\r\n/**\r\n * Saves the data by compressing and storing them in the Player object and sending an update to the server.\r\n *\r\n * @remarks\r\n * This function compresses the data using LZString and stores them in the Player object.\r\n * It also sets a timeout to synchronize the extension data with the server and send an update if necessary.\r\n */\r\nexport const saveData = () => {\r\n  const compressed = LZString.compressToBase64(\r\n    JSON.stringify(Player[modIdentifier])\r\n  );\r\n  Player.ExtensionSettings[modIdentifier] = compressed;\r\n\r\n  if (dataSaveTimeout) {\r\n    logger.debug(\"Clearing existing data save timeout\");\r\n    clearTimeout(dataSaveTimeout);\r\n  }\r\n  dataSaveTimeout = setTimeout(() => {\r\n    ServerPlayerExtensionSettingsSync(modIdentifier);\r\n    logger.debug({\r\n      message: \"Data saved, sending update to server\",\r\n      data: compressed,\r\n    });\r\n    sendUpdateMyData();\r\n  }, 1000);\r\n};\r\n\r\nconst devMode = false; // Manually toggle during local development if needed to clear settings\r\nexport const loadOrGenerateData = () => {\r\n  if (devMode) {\r\n    Player.ExtensionSettings[modIdentifier] = \"N4XyA===\"; // Empty object compressed\r\n    ServerPlayerExtensionSettingsSync(modIdentifier);\r\n    logger.warn(\"Dev mode enabled, cleared data\");\r\n  }\r\n\r\n  let Settings, Stats;\r\n  const dataString = LZString.decompressFromBase64(\r\n    Player.ExtensionSettings[modIdentifier]\r\n  );\r\n  if (!dataString) {\r\n    logger.info(`Generating new settings`);\r\n    Settings = {};\r\n    Stats = {};\r\n  } else {\r\n    logger.info(`Loaded settings from server`);\r\n    Settings = JSON.parse(dataString).Settings as ModSettings;\r\n    Stats = JSON.parse(dataString).Stats as ModStats;\r\n  }\r\n\r\n  const modStorageObject = merge(\r\n    {\r\n      Settings: defaultSettings, // Start with default settings, so if new settings are added they are added to all players\r\n      Stats: defaultStats,\r\n      ModVersion: modVersion,\r\n    },\r\n    { Settings, Stats } // Merge in the user's existing data\r\n  );\r\n\r\n  logger.debug({ message: \"Merged settings object\", modStorageObject });\r\n\r\n  Player[modIdentifier] = modStorageObject;\r\n};\r\n\r\nexport const clearData = () => {\r\n  Player.ExtensionSettings[modIdentifier] = \"N4XyA===\"; // Empty object compressed\r\n  ServerPlayerExtensionSettingsSync(modIdentifier);\r\n  logger.warn(\"cleared data\");\r\n};\r\n","import bcModSdkRef from \"bondage-club-mod-sdk\";\r\nimport { ModName, ModRepo, ModVersion } from \"../types/definitions\";\r\nimport { PermissionLevels } from \"../types/types\";\r\nimport { saveData } from \"./settings\";\r\n\r\nexport const bcModSDK = bcModSdkRef.registerMod({\r\n  name: ModName,\r\n  fullName: ModName,\r\n  version: ModVersion,\r\n  repository: ModRepo,\r\n});\r\n\r\nexport function isObject(obj: unknown): obj is Record<string, any> {\r\n  return !!obj && typeof obj === \"object\" && !Array.isArray(obj);\r\n}\r\n\r\nexport async function waitFor(\r\n  func: { (): any; (): boolean; (): any },\r\n  cancelFunc = () => false\r\n) {\r\n  while (!func()) {\r\n    if (cancelFunc()) return false;\r\n    await new Promise((resolve) => setTimeout(resolve, 10));\r\n  }\r\n  return true;\r\n}\r\n\r\nexport const sendChatLocal = (message: string): void => {\r\n  if (!ServerPlayerIsInChatRoom()) return;\r\n  const msgElement = document.createElement(\"div\");\r\n  msgElement.innerHTML = message\r\n    .split(\"\\n\")\r\n    .map((line) => line.trim())\r\n    .join(\"<br/>\");\r\n  msgElement.classList.add(`${modIdentifier}LocalMessage`);\r\n  document.querySelector(\"#TextAreaChatLog\")?.appendChild(msgElement);\r\n  ElementScrollToEnd(\"TextAreaChatLog\");\r\n};\r\n\r\nexport const getMyMaxPermissionLevel = (target: Character) => {\r\n  if (target.MemberNumber === Player.MemberNumber) return PermissionLevels.Self;\r\n  if (target.IsOwnedByPlayer()) return PermissionLevels.Owner;\r\n  if (target.IsLoverOfPlayer()) return PermissionLevels.Lovers;\r\n\r\n  if (target.MemberNumber && Player.FriendList?.includes(target.MemberNumber))\r\n    return PermissionLevels.Friends;\r\n\r\n  if (ServerChatRoomGetAllowItem(Player, target))\r\n    return PermissionLevels.ItemPermission;\r\n\r\n  return PermissionLevels.Anyone;\r\n};\r\n\r\n// might be useful\r\nexport class Saver {\r\n  private lastSaveTime: number = 0;\r\n  private allowedSaveInterval: number;\r\n  constructor(allowedSaveInterval: number) {\r\n    this.allowedSaveInterval = allowedSaveInterval;\r\n  }\r\n  save() {\r\n    if (Date.now() - this.lastSaveTime > this.allowedSaveInterval) {\r\n      saveData();\r\n      this.lastSaveTime = Date.now();\r\n    }\r\n  }\r\n}\r\n\r\nexport const waitForElement = async (\r\n  selector: string,\r\n  options: { childCheck?: boolean } = {}\r\n): Promise<Element> => {\r\n  return new Promise((resolve) => {\r\n    const element = document.querySelector(selector);\r\n    if (element) {\r\n      resolve(element);\r\n      return;\r\n    }\r\n\r\n    const observer = new MutationObserver(() => {\r\n      const target = document.querySelector(selector);\r\n      if (target && (!options.childCheck || target.childElementCount > 0)) {\r\n        observer.disconnect();\r\n        resolve(target);\r\n      }\r\n    });\r\n\r\n    observer.observe(document.body, { childList: true, subtree: true });\r\n  });\r\n};\r\nexport const generateUniqueID = (identifier?: string) => {\r\n  identifier = identifier || modIdentifier;\r\n  return `${identifier}_${Date.now()}_${Math.random()\r\n    .toString(36)\r\n    .substr(2, 9)}`;\r\n};\r\n// similar to saver but limits how often a function can be called\r\nexport class Debouncer {\r\n  private lastCallTime: number = 0;\r\n  private allowedCallInterval: number;\r\n  constructor(allowedCallInterval: number) {\r\n    this.allowedCallInterval = allowedCallInterval;\r\n  }\r\n  check(): boolean {\r\n    if (Date.now() - this.lastCallTime > this.allowedCallInterval) {\r\n      this.lastCallTime = Date.now();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  reset() {\r\n    this.lastCallTime = 0;\r\n  }\r\n  isReady() {\r\n    return Date.now() - this.lastCallTime > this.allowedCallInterval;\r\n  }\r\n}\r\n","import {\r\n  ChangeDiaperRequestEntry,\r\n  PluginServerChatRoomMessage,\r\n} from \"../types/types\";\r\nimport { generateUniqueID } from \"./utils\";\r\n\r\nexport const pendingRequests: Map<string, PendingRequest> = new Map();\r\nexport class PendingRequest {\r\n  target: number;\r\n  state: \"pending\" | \"accepted\" | \"rejected\" | \"timedout\" | \"cancelled\";\r\n  type: string;\r\n  id: string;\r\n  timeout: number;\r\n  requestTime: number = Date.now();\r\n  constructor(target: number, type: string, timeout: number = 10000) {\r\n    this.target = target;\r\n    this.state = \"pending\";\r\n    this.type = type;\r\n    this.id = generateUniqueID(type);\r\n    this.timeout = timeout;\r\n    pendingRequests.set(this.id, this);\r\n    setTimeout(() => {\r\n      if (this.state !== \"pending\") return;\r\n      this.state = \"timedout\";\r\n      this.sync();\r\n    }, timeout);\r\n    this.sync();\r\n  }\r\n  sync() {\r\n    const message: PluginServerChatRoomMessage = {\r\n      Type: \"Hidden\",\r\n      Content: `${modIdentifier}Msg`,\r\n      Sender: Player.MemberNumber,\r\n      Target: this.target,\r\n      Dictionary: [\r\n        {\r\n          message: {\r\n            type: this.type,\r\n            state: this.state,\r\n            id: this.id,\r\n          } as ChangeDiaperRequestEntry,\r\n        },\r\n      ],\r\n    };\r\n    ServerSend(\"ChatRoomChat\", message as ServerChatRoomMessage);\r\n  }\r\n  cancel() {\r\n    this.state = \"cancelled\";\r\n    this.sync();\r\n  }\r\n}\r\n","export function getCharacter(memberNumber: number): Character | null {\r\n  const character = ChatRoomCharacter.find(\r\n    (c) => c.MemberNumber === memberNumber\r\n  );\r\n\r\n  if (!character) {\r\n    return null;\r\n  }\r\n\r\n  if (character?.IsPlayer()) {\r\n    return character as Character;\r\n  }\r\n\r\n  return character as Character;\r\n}\r\n\r\nexport function getCharacterName(memberNumber: number | undefined): string {\r\n  if (!memberNumber) {\r\n    return \"Unknown\";\r\n  }\r\n  const character = getCharacter(memberNumber);\r\n\r\n  if (!character) {\r\n    return \"Unknown\";\r\n  }\r\n  return character.Nickname ? character.Nickname : character.Name;\r\n}\r\n","import { bcModSDK, generateUniqueID, waitForElement } from \"../utils\";\r\nimport { getPlayerDiaperSize, hasDiaper } from \"./diaper\";\r\nimport { getCharacter, getCharacterName } from \"./playerUtils\";\r\n\r\nexport class ABCLStatsWindow {\r\n  statsDrawer: HTMLElement;\r\n  openButton: HTMLButtonElement;\r\n  folded: boolean = false;\r\n  constructor() {\r\n    this.openButton = document.createElement(\"button\");\r\n    this.openButton.classList.add(`${modIdentifier}OpenStatsButton`);\r\n    this.openButton.textContent = \"ABCL Stats\";\r\n    overlay.appendChild(this.openButton);\r\n\r\n    this.statsDrawer = document.createElement(\"sl-drawer\");\r\n    this.statsDrawer.innerHTML = `\r\n    <p class=\"${modIdentifier}WindowHeaderTitle\">Stats</p>\r\n    <sl-select id=\"${modIdentifier}CurrentPlayerSelect\" value=\"${Player.MemberNumber}\">\r\n    </sl-select>\r\n\r\n  \r\n\t\t<div class=\"${modIdentifier}StatsWindowContent\">\r\n      <label id=\"SoilinessPercentage\">Soiliness</label>\r\n      <sl-progress-bar label=\"Soiliness\" class=\"${modIdentifier}SoilinessPercentage\"></sl-progress-bar>\r\n      <label id=\"WetnessPercentage\">Wetness</label>\r\n      <sl-progress-bar label=\"Wetness\" class=\"${modIdentifier}WetnessPercentage\"></sl-progress-bar>\r\n      <label id=\"BowelFullness\">Bowel</label>\r\n      <sl-progress-bar label=\"Bowel Fullness\" class=\"${modIdentifier}BowelFullness\"></sl-progress-bar>\r\n      <label id=\"BladderFullness\">Bladder</label>\r\n      <sl-progress-bar label=\"Bladder Fullness\" class=\"${modIdentifier}BladderFullness\"></sl-progress-bar>\r\n      <label id=\"Incontinence\">Incontinence</label>\r\n      <sl-progress-bar label=\"Incontinence\" class=\"${modIdentifier}Incontinence\"></sl-progress-bar>\r\n      <label id=\"MentalRegression\">Mental Regression</label>\r\n      <sl-progress-bar label=\"Mental Regression\" class=\"${modIdentifier}MentalRegression\"></sl-progress-bar>\r\n\t\t</div>\r\n   <sl-button class=\"${modIdentifier}RefreshButton\">Refresh</sl-button>\r\n\t`;\r\n\r\n    overlay.appendChild(this.statsDrawer);\r\n    this.statsDrawer\r\n      .querySelector(`#${modIdentifier}CurrentPlayerSelect`)\r\n      ?.addEventListener(\"sl-change\", () => this.update());\r\n    this.statsDrawer\r\n      .querySelector(`.${modIdentifier}RefreshButton`)\r\n      ?.addEventListener(\"click\", () => this.update());\r\n    this.openButton.addEventListener(\"click\", () => {\r\n      if (this.statsDrawer.getAttribute(\"open\") === \"true\") {\r\n        this.statsDrawer.removeAttribute(\"open\");\r\n      } else {\r\n        this.statsDrawer.setAttribute(\"open\", \"true\");\r\n        this.update();\r\n      }\r\n    });\r\n    this.update();\r\n  }\r\n\r\n  async update() {\r\n    const currentPlayerSelect: HTMLSelectElement | null =\r\n      this.statsDrawer.querySelector(`#${modIdentifier}CurrentPlayerSelect`);\r\n    if (!currentPlayerSelect) return;\r\n\r\n    let selectedCharacter:\r\n      | Character\r\n      | (Character & { ABCL: ModStorageModel })\r\n      | null = getCharacter(Number(currentPlayerSelect.value));\r\n\r\n    // fill select ChatRoomCharacter\r\n    currentPlayerSelect.innerHTML = \"\";\r\n    for (let character of ChatRoomCharacter) {\r\n      if (!character.ABCL) continue;\r\n      currentPlayerSelect.innerHTML += `<sl-option value=\"${\r\n        character.MemberNumber\r\n      }\">${getCharacterName(character.MemberNumber)}</sl-option>`;\r\n    }\r\n    if (!selectedCharacter || !selectedCharacter.ABCL) {\r\n      selectedCharacter = Player;\r\n    }\r\n\r\n    const updateInput = (className: string, value: number) => {\r\n      value = Math.round(value);\r\n      const input: HTMLInputElement | null = this.statsDrawer.querySelector(\r\n        `.${modIdentifier}${className}`\r\n      );\r\n      const label: HTMLLabelElement | null = this.statsDrawer.querySelector(\r\n        `#${className}`\r\n      );\r\n      if (!input || !label) return;\r\n      const valueRounded = Math.round((value + Number.EPSILON) * 10) / 10;\r\n      if (value >= 100) {\r\n        input.value = \"100\";\r\n        input.innerText = `overflowing ${Math.round(\r\n          (value - 100) / (value / 100)\r\n        )}%`;\r\n        label.innerText = `${label.innerText.split(\":\")[0]}: overflowing ${\r\n          valueRounded - 100\r\n        }%`;\r\n      } else {\r\n        input.value = valueRounded.toString();\r\n        input.innerText = valueRounded.toString() + \"%\";\r\n        label.innerText =\r\n          label.innerText.split(\":\")[0] + \": \" + valueRounded.toString() + \"%\";\r\n      }\r\n    };\r\n    if (selectedCharacter.ABCL) {\r\n      if (hasDiaper(selectedCharacter)) {\r\n        updateInput(\r\n          \"SoilinessPercentage\",\r\n          (selectedCharacter.ABCL.Stats.Soiliness.value /\r\n            getPlayerDiaperSize(selectedCharacter)) *\r\n            100\r\n        );\r\n        updateInput(\r\n          \"WetnessPercentage\",\r\n          (selectedCharacter.ABCL.Stats.Wetness.value /\r\n            getPlayerDiaperSize(selectedCharacter)) *\r\n            100\r\n        );\r\n      } else {\r\n        updateInput(\"SoilinessPercentage\", 0);\r\n        updateInput(\"WetnessPercentage\", 0);\r\n      }\r\n\r\n      updateInput(\r\n        \"BowelFullness\",\r\n        (selectedCharacter.ABCL.Stats.Bowel.value /\r\n          selectedCharacter.ABCL.Stats.Bowel.size) *\r\n          100\r\n      );\r\n      updateInput(\r\n        \"BladderFullness\",\r\n        (selectedCharacter.ABCL.Stats.Bladder.value /\r\n          selectedCharacter.ABCL.Stats.Bladder.size) *\r\n          100\r\n      );\r\n      updateInput(\r\n        \"Incontinence\",\r\n        selectedCharacter.ABCL.Stats.Incontinence.value * 100\r\n      );\r\n      updateInput(\r\n        \"MentalRegression\",\r\n        selectedCharacter.ABCL.Stats.MentalRegression.value * 100\r\n      );\r\n    }\r\n  }\r\n}\r\nclass MovableElement {\r\n  newX: number = 0;\r\n  newY: number = 0;\r\n  oldX: number = 0;\r\n  oldY: number = 0;\r\n  element: HTMLElement;\r\n  isDragging: boolean = false;\r\n  isResizing: boolean = false;\r\n  resizeDirection: string | null = null;\r\n  edgeThreshold: number = 10; // Distance from the edge to trigger resizing\r\n  resizable: boolean = true;\r\n\r\n  constructor(element: HTMLElement, resizable: boolean = false) {\r\n    this.element = element;\r\n    this.resizable = resizable;\r\n    // Bind methods to the instance\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onMouseEnter = this.onMouseEnter.bind(this);\r\n    this.onMouseLeave = this.onMouseLeave.bind(this);\r\n    this.onMouseMoveForCursor = this.onMouseMoveForCursor.bind(this);\r\n\r\n    this.element.addEventListener(\"mousedown\", this.onMouseDown);\r\n\r\n    this.element.addEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n    this.element.style.position = \"fixed\";\r\n\r\n    if (!this.resizable) {\r\n      return;\r\n    }\r\n    this.element.style.resize = \"none\";\r\n    this.element.addEventListener(\"mouseenter\", this.onMouseEnter);\r\n    this.element.addEventListener(\"mouseleave\", this.onMouseLeave);\r\n  }\r\n\r\n  onMouseEnter(event: MouseEvent) {\r\n    // Add mousemove listener for cursor updates\r\n    this.element.addEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n  }\r\n\r\n  onMouseLeave(event: MouseEvent) {\r\n    // Remove mousemove listener and reset cursor\r\n    this.element.removeEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n    this.element.style.cursor = \"default\";\r\n  }\r\n\r\n  onMouseMoveForCursor(event: MouseEvent) {\r\n    // Update cursor based on mouse position\r\n    const { offsetX, offsetY } = event;\r\n    const { offsetWidth, offsetHeight } = this.element;\r\n    if (!this.resizable) return;\r\n    if (offsetX < this.edgeThreshold) {\r\n      this.element.style.cursor = \"ew-resize\"; // Left edge\r\n    } else if (offsetX > offsetWidth - this.edgeThreshold) {\r\n      this.element.style.cursor = \"ew-resize\"; // Right edge\r\n    } else if (offsetY < this.edgeThreshold) {\r\n      this.element.style.cursor = \"ns-resize\"; // Top edge\r\n    } else if (offsetY > offsetHeight - this.edgeThreshold) {\r\n      this.element.style.cursor = \"ns-resize\"; // Bottom edge\r\n    } else {\r\n      this.element.style.cursor = \"default\";\r\n    }\r\n  }\r\n\r\n  onMouseDown(event: MouseEvent) {\r\n    const { offsetX, offsetY } = event;\r\n    const { offsetWidth, offsetHeight } = this.element;\r\n\r\n    // Determine if resizing or dragging\r\n    if (this.resizable) {\r\n      if (offsetX < this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"left\";\r\n      } else if (offsetX > offsetWidth - this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"right\";\r\n      } else if (offsetY < this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"top\";\r\n      } else if (offsetY > offsetHeight - this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"bottom\";\r\n      } else {\r\n        this.isDragging = true;\r\n      }\r\n    } else {\r\n      this.isDragging = true;\r\n    }\r\n\r\n    if (this.isDragging || this.isResizing) {\r\n      event.preventDefault();\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n      document.addEventListener(\"mousemove\", this.onMouseMove);\r\n      document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    }\r\n  }\r\n\r\n  onMouseMove(event: MouseEvent) {\r\n    if (this.isDragging) {\r\n      // Dragging logic\r\n      this.newX = this.oldX - event.clientX;\r\n      this.newY = this.oldY - event.clientY;\r\n\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n\r\n      this.element.style.top = `${this.element.offsetTop - this.newY}px`;\r\n      this.element.style.left = `${this.element.offsetLeft - this.newX}px`;\r\n    } else if (this.isResizing) {\r\n      // Resizing logic\r\n      const deltaX = event.clientX - this.oldX;\r\n      const deltaY = event.clientY - this.oldY;\r\n\r\n      const style = getComputedStyle(this.element);\r\n      const left = parseInt(style.left, 10);\r\n      const top = parseInt(style.top, 10);\r\n      const width = parseInt(style.width, 10);\r\n      const height = parseInt(style.height, 10);\r\n\r\n      switch (this.resizeDirection) {\r\n        case \"left\":\r\n          this.element.style.width = `${width - deltaX}px`;\r\n          this.element.style.left = `${left + deltaX / 2}px`;\r\n          break;\r\n        case \"right\":\r\n          this.element.style.width = `${width + deltaX}px`;\r\n          this.element.style.left = `${left + deltaX / 2}px`;\r\n          break;\r\n        case \"top\":\r\n          this.element.style.height = `${height - deltaY}px`;\r\n          this.element.style.top = `${top + deltaY / 2}px`;\r\n          break;\r\n        case \"bottom\":\r\n          this.element.style.height = `${height + deltaY}px`;\r\n          this.element.style.top = `${top + deltaY / 2}px`;\r\n          break;\r\n      }\r\n\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n    }\r\n  }\r\n\r\n  onMouseUp(event: MouseEvent) {\r\n    event.preventDefault();\r\n    // Clean up\r\n    this.isDragging = false;\r\n    this.isResizing = false;\r\n    this.resizeDirection = null;\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  }\r\n}\r\n\r\nexport class ABCLNotification {\r\n  message: string;\r\n  duration: number;\r\n  constructor(message: string, duration: number = 3000) {\r\n    this.message = message;\r\n    this.duration = duration;\r\n    this.show();\r\n  }\r\n\r\n  show() {\r\n    const notification = document.createElement(\"div\");\r\n    notification.classList.add(`${modIdentifier}Notification`);\r\n    notification.textContent = this.message;\r\n\r\n    const closeButton = document.createElement(\"button\");\r\n    closeButton.classList.add(\"ABCLClose\");\r\n    closeButton.textContent = \"X\";\r\n    closeButton.addEventListener(\"click\", () => notification.remove());\r\n\r\n    notification.appendChild(closeButton);\r\n    overlay.appendChild(notification);\r\n\r\n    setTimeout(() => {\r\n      notification.remove();\r\n    }, this.duration);\r\n  }\r\n}\r\n\r\nexport class ABCLYesNoPrompt {\r\n  message: string;\r\n  onAccept: (...args: any) => void;\r\n  onDeny: (...args: any) => void;\r\n  id: string;\r\n  prompt: HTMLElement = document.createElement(\"div\");\r\n  constructor(\r\n    message: string,\r\n    onAccept: () => void,\r\n    onDeny: () => void,\r\n    timeout: number = -1\r\n  ) {\r\n    new MovableElement(this.prompt);\r\n    this.id = generateUniqueID();\r\n    this.message = message;\r\n    this.onAccept = onAccept;\r\n    this.onDeny = onDeny;\r\n    this.show();\r\n    if (timeout === -1) return;\r\n    setTimeout(() => {\r\n      this.prompt.remove();\r\n    }, timeout);\r\n  }\r\n\r\n  show() {\r\n    this.prompt.classList.add(`${modIdentifier}Prompt`);\r\n    this.prompt.id = this.id;\r\n    this.prompt.innerHTML = `<p>${this.message}</p><button class=\"${modIdentifier}PromptNo ${modIdentifier}Button\">Deny</button><button class=\"${modIdentifier}PromptYes ${modIdentifier}Button\">Accept</button>`;\r\n    overlay.appendChild(this.prompt);\r\n    this.prompt\r\n      .querySelector(`#${this.id} .${modIdentifier}PromptYes`)\r\n      ?.addEventListener(\"click\", () => {\r\n        this.onAccept();\r\n        this.prompt.remove();\r\n      });\r\n    this.prompt\r\n      .querySelector(`#${this.id} .${modIdentifier}PromptNo`)\r\n      ?.addEventListener(\"click\", () => {\r\n        this.onDeny();\r\n        this.prompt.remove();\r\n      });\r\n  }\r\n}\r\n\r\n// like in cookie clicker how numbers float up\r\nexport class ABCLTextParticle {\r\n  element: HTMLElement = document.createElement(\"div\");\r\n  color: string = \"white\";\r\n  size: number = 1;\r\n  speed: number = 1;\r\n  x: number = 0;\r\n  y: number = 0;\r\n\r\n  constructor(\r\n    element: HTMLElement | string,\r\n    options: { size?: number; speed?: number; x: number; y: number } = {\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n    color: string = \"white\"\r\n  ) {\r\n    if (typeof element === \"string\") {\r\n      this.element.innerHTML = element;\r\n    } else {\r\n      this.element = element;\r\n    }\r\n    this.speed = options.speed || 1;\r\n    this.size = options.size || 1;\r\n    this.x = options.x;\r\n    this.y = options.y;\r\n    this.element.classList.add(`${modIdentifier}TextParticle`);\r\n    this.element.style.color = color;\r\n    this.element.style.fontSize = `${options.size}px`;\r\n    this.element.style.left = `${options.x}px`;\r\n    this.element.style.top = `${options.y}px`;\r\n    overlay.appendChild(this.element);\r\n    setInterval(() => this.render(), 1000 / 30);\r\n  }\r\n  render() {\r\n    this.element.style.top = `${\r\n      parseInt(this.element.style.top) - this.speed\r\n    }px`;\r\n    if (parseInt(this.element.style.top) < 0) {\r\n      this.element.remove();\r\n    }\r\n  }\r\n}\r\n\r\nexport const overlay = document.createElement(\"div\");\r\noverlay.classList.add(\r\n  (Player.ChatSettings?.ColorTheme ?? \"Light\").startsWith(\"Light\") ?\r\n    \"sl-theme-light\"\r\n    : \"sl-theme-dark\"\r\n);\r\noverlay.style.color = \r\n  (Player.ChatSettings?.ColorTheme ?? \"Light\").startsWith(\"Light\") ?\r\n    \"black\"\r\n    : \"white\";\r\nexport let abclStatsWindow: ABCLStatsWindow;\r\noverlay.classList.add(`${modIdentifier}Overlay`);\r\n\r\nexport const initOverlay = () => {\r\n  waitForElement(\"#chat-room-div\", { childCheck: true }).then(() => {\r\n    abclStatsWindow = new ABCLStatsWindow();\r\n\r\n    bcModSDK.hookFunction(\r\n      \"ChatRoomCharacterViewDrawOverlay\",\r\n      1,\r\n      (args, next) => {\r\n        next(args);\r\n        const [C, CharX, CharY, Zoom] = args;\r\n        if (C.MemberNumber === Player.MemberNumber) {\r\n          const [X, Y] = [\r\n            ((CharX + 300 * Zoom) / 2000) * overlay.clientWidth,\r\n            ((CharY + 550 * Zoom) / 1000) * overlay.clientHeight,\r\n          ];\r\n          abclStatsWindow.openButton.style.top = `${Y}px`;\r\n          abclStatsWindow.openButton.style.left = `${X}px`;\r\n        }\r\n      }\r\n    );\r\n    document.body.appendChild(overlay);\r\n  });\r\n};\r\n","import { merge } from \"lodash-es\";\r\nimport { Debouncer, Saver, sendChatLocal } from \"../utils\";\r\nimport {\r\n  incontinenceChanceFormula,\r\n  getPlayerDiaperSize,\r\n  hasDiaper,\r\n  mentalRegressionOnAccident,\r\n  mentalRegressionOvertime,\r\n  updateDiaperColor,\r\n  incontinenceLimitFormula,\r\n} from \"./diaper\";\r\nimport { abclStatsWindow } from \"./ui\";\r\n\r\nconst metabolismValues: Map<MetabolismSettingValues, number> = new Map([\r\n  [\"Slow\", 0.5], // 40 min\r\n  [\"Normal\", 1], // 20 min\r\n  [\"Fast\", 1.5], // 13.3 min\r\n  [\"Faster\", 2], // 10 min\r\n  [\"Fastest\", 3], // 6.6 min\r\n]);\r\n\r\nexport const abclPlayer = {\r\n  onAccident: () => {\r\n    abclPlayer.stats.MentalRegression += mentalRegressionOnAccident();\r\n  },\r\n  update: () => {\r\n    // once per minute\r\n    abclPlayer.stats.MentalRegression += mentalRegressionOvertime();\r\n    abclPlayer.stats.BladderValue +=\r\n      abclPlayer.stats.WaterIntake * abclPlayer.settings.MetabolismValue;\r\n    abclPlayer.stats.BowelValue +=\r\n      abclPlayer.stats.FoodIntake * abclPlayer.settings.MetabolismValue;\r\n\r\n    abclPlayer.attemptWetting();\r\n    abclPlayer.attemptSoiling();\r\n    playerSaver.save();\r\n  },\r\n  attemptWetting: () => {\r\n    if (abclPlayer.settings.DisableWetting) return;\r\n\r\n    const limit = incontinenceLimitFormula(abclPlayer.stats.Incontinence);\r\n    const chance = incontinenceChanceFormula(\r\n      abclPlayer.stats.Incontinence,\r\n      abclPlayer.stats.BladderFullness\r\n    );\r\n\r\n    if (!(Math.random() < chance || abclPlayer.stats.BladderFullness > limit))\r\n      return;\r\n\r\n    if (!incontinenceCheck.check()) return;\r\n\r\n    MiniGameStart(\"WetMinigame\", 30 * chance, \"noOp\");\r\n  },\r\n  attemptSoiling: () => {\r\n    if (abclPlayer.settings.DisableSoiling) return;\r\n\r\n    const limit = incontinenceLimitFormula(abclPlayer.stats.Incontinence);\r\n    const chance = incontinenceChanceFormula(\r\n      abclPlayer.stats.Incontinence,\r\n      abclPlayer.stats.BowelFullness\r\n    );\r\n\r\n    if (!(Math.random() < chance || abclPlayer.stats.BowelFullness > limit))\r\n      return;\r\n\r\n    if (!incontinenceCheck.check()) return;\r\n\r\n    MiniGameStart(\"MessMinigame\", 30 * chance, \"noOp\");\r\n  },\r\n  releaseBladder: () => {\r\n    const isTooEarly = abclPlayer.stats.BladderFullness < 0.3;\r\n    const isPossible = !isTooEarly;\r\n    const isGood = abclPlayer.stats.BladderFullness > 0.6;\r\n    if (isTooEarly) {\r\n      sendChatLocal(\"You try to pee, but it doesn't seem to be working.\");\r\n      return;\r\n    }\r\n    if (isPossible) {\r\n      abclPlayer.stats.WetnessValue += abclPlayer.stats.BladderValue;\r\n      abclPlayer.stats.BladderFullness = 0;\r\n      sendChatLocal(\"You feel a sense of release as you let go.\");\r\n    }\r\n    if (isGood) {\r\n      abclPlayer.stats.Incontinence -= 0.01;\r\n    } else {\r\n      abclPlayer.stats.Incontinence += 0.02;\r\n    }\r\n  },\r\n  releaseBowel: () => {\r\n    const isTooEarly = abclPlayer.stats.BowelFullness < 0.3;\r\n    const isPossible = !isTooEarly;\r\n    const isGood = abclPlayer.stats.BowelFullness > 0.6;\r\n    if (isTooEarly) {\r\n      sendChatLocal(\"You try to let go, but nothing seems to happen.\");\r\n      return;\r\n    }\r\n    if (isPossible) {\r\n      abclPlayer.stats.SoilinessValue += abclPlayer.stats.BowelValue;\r\n      abclPlayer.stats.BowelFullness = 0;\r\n      sendChatLocal(\"You feel a little relief as you let go.\");\r\n    }\r\n    if (isGood) {\r\n      abclPlayer.stats.Incontinence -= 0.01;\r\n    } else {\r\n      abclPlayer.stats.Incontinence += 0.02;\r\n    }\r\n  },\r\n\r\n  stats: {\r\n    set MentalRegression(value: number) {\r\n      if (value < 0) value = 0;\r\n      if (value > 1) value = 1;\r\n      Player[modIdentifier].Stats.MentalRegression.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get MentalRegression() {\r\n      return Player[modIdentifier].Stats.MentalRegression.value;\r\n    },\r\n    set Incontinence(value: number) {\r\n      if (value < 0) value = 0;\r\n      if (value > 1) value = 1;\r\n      Player[modIdentifier].Stats.Incontinence.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get Incontinence() {\r\n      return Player[modIdentifier].Stats.Incontinence.value;\r\n    },\r\n\r\n    // intake\r\n    set WaterIntake(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.WaterIntake.value = value;\r\n    },\r\n    get WaterIntake() {\r\n      return Player[modIdentifier].Stats.WaterIntake.value;\r\n    },\r\n    set FoodIntake(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.FoodIntake.value = value;\r\n    },\r\n    get FoodIntake() {\r\n      return Player[modIdentifier].Stats.FoodIntake.value;\r\n    },\r\n\r\n    // bladder\r\n\r\n    set BladderValue(value: number) {\r\n      if (abclPlayer.settings.DisableWetting) return;\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bladder.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderValue() {\r\n      return Player[modIdentifier].Stats.Bladder.value;\r\n    },\r\n    set BladderSize(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bladder.size = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderSize(): number {\r\n      return Player[modIdentifier].Stats.Bladder.size;\r\n    },\r\n    set WetnessValue(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Wetness.value = value;\r\n      updateDiaperColor();\r\n      abclStatsWindow.update();\r\n    },\r\n    get WetnessValue() {\r\n      return Player[modIdentifier].Stats.Wetness.value;\r\n    },\r\n    // computed\r\n    set BladderFullness(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.BladderValue = value * this.BladderSize;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderFullness(): number {\r\n      return this.BladderValue / this.BladderSize;\r\n    },\r\n\r\n    // bowel\r\n    set BowelValue(value: number) {\r\n      if (abclPlayer.settings.DisableSoiling) return;\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bowel.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelValue() {\r\n      return Player[modIdentifier].Stats.Bowel.value;\r\n    },\r\n\r\n    set BowelSize(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bowel.size = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelSize(): number {\r\n      return Player[modIdentifier].Stats.Bowel.size;\r\n    },\r\n    set SoilinessValue(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Soiliness.value = value;\r\n      updateDiaperColor();\r\n      abclStatsWindow.update();\r\n    },\r\n    get SoilinessValue() {\r\n      return Player[modIdentifier].Stats.Soiliness.value;\r\n    },\r\n    // computed\r\n    set BowelFullness(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.BowelValue = value * this.BowelSize;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelFullness(): number {\r\n      return this.BowelValue / this.BowelSize;\r\n    },\r\n\r\n    get SoilinessPercentage(): number {\r\n      if (getPlayerDiaperSize() == 0) return 0;\r\n      return this.SoilinessValue / getPlayerDiaperSize();\r\n    },\r\n    set SoilinessPercentage(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.SoilinessValue = value * getPlayerDiaperSize();\r\n    },\r\n    get WetnessPercentage(): number {\r\n      if (getPlayerDiaperSize() == 0) return 0;\r\n      return this.WetnessValue / getPlayerDiaperSize();\r\n    },\r\n    set WetnessPercentage(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.WetnessValue = value * getPlayerDiaperSize();\r\n    },\r\n  },\r\n  settings: {\r\n    set Metabolism(value: MetabolismSettingValues) {\r\n      Player[modIdentifier].Settings.Metabolism.value = value;\r\n      playerSaver.save();\r\n    },\r\n    set DisableWetting(value: boolean) {\r\n      Player[modIdentifier].Settings.DisableWetting.value = value;\r\n      playerSaver.save();\r\n    },\r\n    set DisableSoiling(value: boolean) {\r\n      Player[modIdentifier].Settings.DisableSoiling.value = value;\r\n      playerSaver.save();\r\n    },\r\n    addCaregiver(id: number) {\r\n      Player[modIdentifier] = merge(Player[modIdentifier], {\r\n        Settings: {\r\n          CaregiverIDs: {\r\n            value: [...Player[modIdentifier].Settings.CaregiverIDs.value, id],\r\n          },\r\n        },\r\n      });\r\n      playerSaver.save();\r\n    },\r\n    removeCaregiver(id: number) {\r\n      Player[modIdentifier] = merge(Player[modIdentifier], {\r\n        Settings: {\r\n          CaregiverIDs: {\r\n            value: Player[modIdentifier].Settings.CaregiverIDs.value.filter(\r\n              (x) => x !== id\r\n            ),\r\n          },\r\n        },\r\n      });\r\n      playerSaver.save();\r\n    },\r\n    set OpenRemoteSettings(value: boolean) {\r\n      Player[modIdentifier].Settings.OpenRemoteSettings.value = value;\r\n      playerSaver.save();\r\n    },\r\n    get Metabolism(): MetabolismSettingValues {\r\n      return Player[modIdentifier].Settings.Metabolism.value;\r\n    },\r\n    get MetabolismValue(): number {\r\n      const metabolism = metabolismValues.get(\r\n        Player[modIdentifier].Settings.Metabolism.value\r\n      );\r\n      if (typeof metabolism == \"undefined\") {\r\n        throw new Error(\"Invalid metabolism value\");\r\n      }\r\n      return metabolism;\r\n    },\r\n    get DisableWetting(): boolean {\r\n      return Player[modIdentifier].Settings.DisableWetting.value;\r\n    },\r\n    get DisableSoiling(): boolean {\r\n      return Player[modIdentifier].Settings.DisableSoiling.value;\r\n    },\r\n    get CaregiverIDs(): number[] {\r\n      return Player[modIdentifier].Settings.CaregiverIDs.value;\r\n    },\r\n    get OpenRemoteSettings(): boolean {\r\n      return Player[modIdentifier].Settings.OpenRemoteSettings.value;\r\n    },\r\n  },\r\n};\r\n\r\nconst playerSaver = new Saver(2 * 60 * 1000);\r\n\r\nconst incontinenceCheck = new Debouncer(2 * 60 * 1000);\r\n\r\n(window as any).abclPlayer = abclPlayer;\r\n","import { ABCLdata } from \"../../main\";\r\nimport { PendingRequest } from \"../pendingRequest\";\r\nimport { abclPlayer } from \"./player\";\r\n\r\n// Is/Has\r\nexport const isLeaking = (type: \"pee\" | \"poop\" | \"any\" = \"any\") => {\r\n  const diaperSize = getPlayerDiaperSize();\r\n  if (type === \"pee\") {\r\n    return abclPlayer.stats.WetnessValue >= diaperSize;\r\n  }\r\n  if (type === \"poop\") {\r\n    return abclPlayer.stats.SoilinessValue >= diaperSize;\r\n  }\r\n  return (\r\n    abclPlayer.stats.SoilinessValue >= diaperSize ||\r\n    abclPlayer.stats.WetnessValue >= diaperSize\r\n  );\r\n};\r\nexport const isDiaperDirty = () => {\r\n  const diaperSize = getPlayerDiaperSize();\r\n  return (\r\n    abclPlayer.stats.SoilinessValue + abclPlayer.stats.WetnessValue >=\r\n    diaperSize / 2\r\n  );\r\n};\r\nexport const isDiaper = (item: Item): boolean => {\r\n  return (\r\n    item.Asset.Description.toLowerCase().includes(\"diaper\") &&\r\n    item.Asset.Description in ABCLdata.Diapers\r\n  );\r\n};\r\nexport function hasDiaper(player: Character = Player): boolean {\r\n  if (!player) return false;\r\n  const pelvisItem = InventoryGet(player, \"ItemPelvis\");\r\n  const panties = InventoryGet(player, \"Panties\");\r\n  return Boolean(\r\n    (pelvisItem && isDiaper(pelvisItem)) || (panties && isDiaper(panties))\r\n  );\r\n}\r\nexport const isWearingBabyClothes = () => {\r\n  return Player.Appearance.some((clothing) => {\r\n    return ABCLdata.BabyClothes.includes(clothing.Asset.Description);\r\n  });\r\n};\r\n\r\n// Color\r\nexport function averageColor(\r\n  color_1: HexColor,\r\n  color_2: HexColor,\r\n  ratio: number = 0.5\r\n): HexColor {\r\n  let rgb_1 = DrawHexToRGB(color_1);\r\n  let rgb_2 = DrawHexToRGB(color_2);\r\n  let avgRgb: RGBColor = {\r\n    r: Math.round(rgb_1.r * ratio + rgb_2.r * (1 - ratio)),\r\n    g: Math.round(rgb_1.g * ratio + rgb_2.g * (1 - ratio)),\r\n    b: Math.round(rgb_1.b * ratio + rgb_2.b * (1 - ratio)),\r\n  };\r\n  return DrawRGBToHex([avgRgb.r, avgRgb.g, avgRgb.b]);\r\n}\r\nexport function mixLevels(\r\n  level: number,\r\n  highLevel: string,\r\n  midLevel: string,\r\n  lowLevel: string\r\n): string {\r\n  if (level > 0.75) {\r\n    return level > 0.9\r\n      ? highLevel\r\n      : averageColor(highLevel, midLevel, level - 0.75);\r\n  } else {\r\n    return averageColor(midLevel, lowLevel, level);\r\n  }\r\n}\r\n\r\nexport const setDiaperColor = (\r\n  slot: AssetGroupName,\r\n  primaryColor: string,\r\n  secondaryColor: string,\r\n  player: Character = Player\r\n) => {\r\n  const item = InventoryGet(player, slot);\r\n  if (item && isDiaper(item)) {\r\n    const type = typeof item.Asset.DefaultColor;\r\n    const diaper =\r\n      ABCLdata.Diapers[item.Asset.Description as keyof typeof ABCLdata.Diapers];\r\n\r\n    if (type !== typeof item.Color) {\r\n      item.Color = item.Asset.DefaultColor as ItemColor;\r\n    }\r\n    if (type === \"object\" && JSON.stringify(item.Color).includes('\"Default\"')) {\r\n      item.Color = JSON.parse(\r\n        JSON.stringify(item.Color).replaceAll(/\"Default\"/g, '\"#FFFFFF\"')\r\n      );\r\n    }\r\n    const color: string[] = (item.Color ?? item.Asset.DefaultColor) as string[];\r\n    if (\"primaryColor\" in diaper) {\r\n      color[diaper.primaryColor] = primaryColor;\r\n    }\r\n    if (\"secondaryColor\" in diaper) {\r\n      color[diaper.secondaryColor] = secondaryColor;\r\n    }\r\n    item.Color = color;\r\n  }\r\n};\r\nexport const updateDiaperColor = () => {\r\n  const messLevel = abclPlayer.stats.SoilinessValue / getPlayerDiaperSize();\r\n  const wetLevel = abclPlayer.stats.WetnessValue / getPlayerDiaperSize();\r\n\r\n  const messColor = mixLevels(\r\n    messLevel,\r\n    ABCLdata.DiaperColors[\"maximummess\"],\r\n    ABCLdata.DiaperColors[\"middlemess\"],\r\n    ABCLdata.DiaperColors[\"clean\"]\r\n  );\r\n  const wetColor = mixLevels(\r\n    wetLevel,\r\n    ABCLdata.DiaperColors[\"maximumwet\"],\r\n    ABCLdata.DiaperColors[\"middlewet\"],\r\n    ABCLdata.DiaperColors[\"clean\"]\r\n  );\r\n\r\n  const primaryColor = averageColor(messColor, wetColor, 0.7);\r\n  const secondaryColor = averageColor(messColor, wetColor, 0.9);\r\n\r\n  setDiaperColor(\"ItemPelvis\", primaryColor, secondaryColor, Player);\r\n  setDiaperColor(\"Panties\", primaryColor, secondaryColor, Player);\r\n  CharacterRefresh(Player, true);\r\n  ChatRoomCharacterUpdate(Player);\r\n};\r\n\r\n// Size\r\nexport function getPlayerDiaperSize(player: Character = Player): number {\r\n  const pelvisItem = InventoryGet(player, \"ItemPelvis\");\r\n  const panties = InventoryGet(player, \"Panties\");\r\n  let size = 0;\r\n  if (pelvisItem && isDiaper(pelvisItem)) {\r\n    size += getDiaperSize(pelvisItem);\r\n  }\r\n  if (panties && isDiaper(panties)) {\r\n    size += getDiaperSize(panties);\r\n  }\r\n  return size;\r\n}\r\nexport function getDiaperSize(diaper: Item): number {\r\n  if (\r\n    diaper.Asset.Description === \"Poofy Chastity Diaper\" &&\r\n    diaper.Property?.TypeRecord?.typed === 1\r\n  ) {\r\n    return ABCLdata.DiaperSizeScale.heavy_adult;\r\n  }\r\n  return ABCLdata.DiaperSizeScale[\r\n    ABCLdata.Diapers[diaper.Asset.Description as keyof typeof ABCLdata.Diapers]\r\n      .size as keyof typeof ABCLdata.DiaperSizeScale\r\n  ];\r\n}\r\n\r\nexport const getPlayerDiaper = (): {\r\n  ItemPelvis: Item | null;\r\n  Panties: Item | null;\r\n} => {\r\n  const pelvisItem = InventoryGet(Player, \"ItemPelvis\");\r\n  const panties = InventoryGet(Player, \"Panties\");\r\n  let diapers: { ItemPelvis: Item | null; Panties: Item | null } = {\r\n    ItemPelvis: null,\r\n    Panties: null,\r\n  };\r\n  if (pelvisItem && isDiaper(pelvisItem)) {\r\n    diapers[\"ItemPelvis\"] = pelvisItem;\r\n  }\r\n  if (panties && isDiaper(panties)) {\r\n    diapers[\"Panties\"] = panties;\r\n  }\r\n  return diapers;\r\n};\r\n\r\n// incontinence\r\nexport const incontinenceLimitFormula = (incontinence: number) => {\r\n  return 0.9 - incontinence * 0.5;\r\n};\r\n\r\nexport function incontinenceChanceFormula(\r\n  incontinence: number,\r\n  fullness: number\r\n): number {\r\n  const incontinenceWeight = 0.6;\r\n  const fullnessWeight = 0.8;\r\n  const threshold =\r\n    incontinenceWeight * Math.pow(incontinence, 2) +\r\n    fullnessWeight * Math.pow(fullness, 3);\r\n\r\n  return Math.min(Math.max(threshold, 0), 1);\r\n}\r\n\r\n// mental regression\r\nexport const mentalRegressionBonus = () => {\r\n  const assetDescriptions = Player.Appearance.map(\r\n    (clothing) => clothing.Asset.Description\r\n  );\r\n  const matches = ABCLdata.BabyClothes.concat([\r\n    \"milk\",\r\n    \"pacifier\",\r\n    \"bib\",\r\n  ]).filter((description) =>\r\n    assetDescriptions.some((assetDescription) =>\r\n      assetDescription.toLocaleLowerCase().includes(description)\r\n    )\r\n  );\r\n  return Math.min(matches.length * 0.25, 1);\r\n};\r\nexport const mentalRegressionOvertime = () => {\r\n  // if wearing baby clothes, mental regression goes up\r\n  // if wet diaper, mental regression goes up\r\n  // if leaking, mental regression goes up a lot\r\n  let modifier = 0 + mentalRegressionBonus();\r\n  if (isWearingBabyClothes()) modifier += 1;\r\n  if (isDiaperDirty()) modifier += 0.25;\r\n  if (isLeaking()) modifier += 0.5;\r\n  return modifier / (150 * 60); // 150 hours till 100%\r\n};\r\n\r\nexport function incontinenceOnAccident() {\r\n  const stages = [\r\n    { totalAccidents: 60, start: 0, end: 0.25 },\r\n    { totalAccidents: 120, start: 0.25, end: 0.5 },\r\n    { totalAccidents: 240, start: 0.5, end: 0.75 },\r\n    { totalAccidents: 480, start: 0.75, end: 1 },\r\n  ];\r\n  for (const { totalAccidents, start, end } of stages) {\r\n    if (\r\n      abclPlayer.stats.Incontinence >= start &&\r\n      abclPlayer.stats.Incontinence < end\r\n    ) {\r\n      return 0.25 / totalAccidents;\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport const mentalRegressionOnAccident = () => {\r\n  const modifier = 1 + mentalRegressionBonus();\r\n  if (abclPlayer.stats.MentalRegression < 0.25) return modifier / 500;\r\n  if (\r\n    0.25 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 0.5 &&\r\n    isDiaperDirty()\r\n  )\r\n    return modifier / 500;\r\n  if (\r\n    0.5 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 0.75 &&\r\n    isLeaking()\r\n  )\r\n    return modifier / 1000;\r\n  if (\r\n    0.75 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 1 &&\r\n    isLeaking()\r\n  )\r\n    return modifier / 1500;\r\n  return 0;\r\n};\r\n\r\nexport const changeDiaper = (player: Character = Player) => {\r\n  const isSomeoneElse = player.MemberNumber !== Player.MemberNumber;\r\n  if (isSomeoneElse && player.MemberNumber) {\r\n    new PendingRequest(player.MemberNumber, \"changeDiaper\", 999999);\r\n    return;\r\n  }\r\n  abclPlayer.stats.SoilinessValue = 0;\r\n  abclPlayer.stats.WetnessValue = 0;\r\n  updateDiaperColor();\r\n};\r\n","import bcModSdk from \"bondage-club-mod-sdk\";\r\nimport {\r\n  SyncEntry,\r\n  PluginServerChatRoomMessage,\r\n  MessageEntry,\r\n  ChangeDiaperRequestEntry,\r\n} from \"../types/types\";\r\nimport { logger } from \"./logger\";\r\nimport { pendingRequests } from \"./pendingRequest\";\r\nimport { changeDiaper, isDiaper, updateDiaperColor } from \"./player/diaper\";\r\nimport { getCharacter, getCharacterName } from \"./player/playerUtils\";\r\nimport { ABCLYesNoPrompt } from \"./player/ui\";\r\nimport {\r\n  bcModSDK,\r\n  getMyMaxPermissionLevel,\r\n  sendChatLocal,\r\n  waitFor,\r\n} from \"./utils\";\r\nimport { overlay } from \"./player/ui\";\r\n\r\nconst filterRestrictedSettings = (settings: ModSettings, target: Character) => {\r\n  const myHighestPermission = getMyMaxPermissionLevel(target);\r\n\r\n  return Object.entries(settings).reduce((acc, [key, value]) => {\r\n    if (value.permission.canView <= myHighestPermission) {\r\n      acc[key as keyof ModSettings] = value;\r\n    }\r\n    return acc;\r\n  }, {} as ModSettings);\r\n};\r\n\r\nexport const sendServerChatRoomMessage = (\r\n  message: MessageEntry\r\n): PluginServerChatRoomMessage => {\r\n  const ChatRoomMessage: PluginServerChatRoomMessage = {\r\n    Type: \"Hidden\",\r\n    Content: `${modIdentifier}Msg`,\r\n    Sender: Player.MemberNumber,\r\n    Dictionary: [\r\n      {\r\n        message: message,\r\n      },\r\n    ],\r\n  };\r\n\r\n  ServerSend(\"ChatRoomChat\", ChatRoomMessage as ServerChatRoomMessage);\r\n  return ChatRoomMessage;\r\n};\r\n/**\r\n * Sends an update of the player's settings to the specified target or to everyone in the chat room.\r\n *\r\n * @param {number} [target] - The MemberNumber of the target player. If not specified, the update is sent to all players.\r\n */\r\nexport const sendUpdateMyData = (target?: number) => {\r\n  const syncDataMessage: PluginServerChatRoomMessage =\r\n    sendServerChatRoomMessage({\r\n      type: \"sync\",\r\n      settings: Player[modIdentifier].Settings,\r\n      stats: Player[modIdentifier].Stats,\r\n      target,\r\n    });\r\n\r\n  logger.debug({\r\n    message: `Sending updated data to ${target ?? \"everyone\"}`,\r\n    data: syncDataMessage,\r\n  });\r\n};\r\n\r\n/**\r\n * Sends a request packet to other players in the chat room to retrieve their data.\r\n */\r\nexport const sendRequestOtherDataPacket = () => {\r\n  sendServerChatRoomMessage({\r\n    type: \"init\",\r\n  });\r\n\r\n  logger.debug(`Requesting data from others.`);\r\n};\r\n\r\n/**\r\n * Handles the \"sync\" packet received from other players, updating the local player's data with the received data.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst handleSyncPacket = (data: PluginServerChatRoomMessage) => {\r\n  if (!data.Sender) return;\r\n  const message = data.Dictionary?.[0]?.message as SyncEntry | undefined;\r\n  if (!message) return;\r\n  logger.debug({\r\n    message: `Received updated data`,\r\n    data,\r\n  });\r\n\r\n  const otherCharacter = getCharacter(data.Sender);\r\n  if (!otherCharacter) return;\r\n\r\n  otherCharacter[modIdentifier] = {\r\n    Settings: filterRestrictedSettings(message.settings, otherCharacter),\r\n    Stats: message.stats,\r\n  };\r\n};\r\n\r\n/**\r\n * Handles the \"init\" packet received from other players, sending the player's data to the requester.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst handleInitPacket = (data: PluginServerChatRoomMessage) => {\r\n  if (!data.Sender) return;\r\n  logger.debug(`Received request for data`);\r\n\r\n  sendUpdateMyData(data.Sender);\r\n};\r\n\r\n/**\r\n * Processes incoming packets and delegates them to the appropriate handler based on their type.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst receivePacket = (data: PluginServerChatRoomMessage) => {\r\n  if (data?.Content !== `${modIdentifier}Msg`) return;\r\n  if (!data.Sender || !data.Dictionary) return;\r\n  if (data.Sender === Player.MemberNumber) return;\r\n  if (data.Type !== \"Hidden\") return;\r\n  if (!data.Dictionary[0]?.message) return;\r\n\r\n  const message = data.Dictionary[0].message;\r\n  if (\"type\" in message) {\r\n    const type = message.type;\r\n    switch (type) {\r\n      case \"init\":\r\n        handleInitPacket(data);\r\n        break;\r\n      case \"sync\":\r\n        handleSyncPacket(data);\r\n        break;\r\n      case \"changeDiaper\":\r\n        console.log(pendingRequests.get(message.id));\r\n        let request = pendingRequests.get(message.id);\r\n        if (\r\n          !request &&\r\n          (message.state === \"accepted\" || message.state === \"rejected\")\r\n        )\r\n          return;\r\n\r\n        switch (message.state) {\r\n          case \"accepted\":\r\n            request!.state = \"accepted\";\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} accepted your change diaper request.`\r\n            );\r\n            break;\r\n          case \"rejected\":\r\n            request!.state = \"rejected\";\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} rejected your change diaper request.`\r\n            );\r\n            break;\r\n          case \"pending\":\r\n            new ABCLYesNoPrompt(\r\n              `${getCharacterName(data.Sender)} wants to change your diaper.`,\r\n              () => {\r\n                sendChatLocal(\r\n                  `${getCharacterName(data.Sender)} changed your diaper.`\r\n                );\r\n                changeDiaper();\r\n                sendServerChatRoomMessage({\r\n                  type: \"changeDiaper\",\r\n                  state: \"accepted\",\r\n                  id: message.id,\r\n                } as ChangeDiaperRequestEntry);\r\n              },\r\n              () => {\r\n                sendServerChatRoomMessage({\r\n                  type: \"changeDiaper\",\r\n                  state: \"rejected\",\r\n                  id: message.id,\r\n                } as ChangeDiaperRequestEntry);\r\n              },\r\n              10 * 1000\r\n            );\r\n            break;\r\n          case \"timedout\":\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )}'s change diaper request timed out.`\r\n            );\r\n            break;\r\n          case \"cancelled\":\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} cancelled their change diaper request.`\r\n            );\r\n            break;\r\n        }\r\n\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Initializes hooks for intercepting chat room messages and synchronizing player data.\r\n * This function waits until the server is connected before setting up hooks.\r\n */\r\nconst initHooks = async () => {\r\n  await waitFor(() => ServerSocket && ServerIsConnected);\r\n\r\n  bcModSDK.hookFunction(\"ChatRoomSync\", 1, (args, next) => {\r\n    sendUpdateMyData(); // Tell everyone else to update their copy of our data, when we join a room.\r\n    return next(args);\r\n  });\r\n\r\n  bcModSDK.hookFunction(\"ChatRoomMessage\", 1, (args, next) => {\r\n    if (\r\n      args[0].Content === \"ServerEnter\" &&\r\n      args[0].Sender === Player.MemberNumber\r\n    ) {\r\n      // Announce (via an init packet) that we're ready to receive data models.\r\n      sendRequestOtherDataPacket();\r\n      return;\r\n    }\r\n\r\n    receivePacket(args[0] as PluginServerChatRoomMessage);\r\n    return next(args);\r\n  });\r\n  bcModSDK.hookFunction(\"CharacterAppearanceSetItem\", 1, (args, next) => {\r\n    let [_character, _slot, _asset] = args;\r\n    const _result = next(args);\r\n    if (_slot === \"ItemPelvis\" && _asset) {\r\n      if (isDiaper({ Asset: _asset })) updateDiaperColor();\r\n    }\r\n    return _result;\r\n  });\r\n\r\n  bcModSDK.hookFunction(\"PreferenceSubscreenChatClick\", 1, (args, next) => {\r\n    if (MouseIn(1815, 75, 90, 90)) {\r\n      const theme = Player.ChatSettings?.ColorTheme ?? \"Light\";\r\n      if (theme.startsWith(\"Light\") && !!overlay && !overlay.classList.contains(\"sl-theme-light\")) {\r\n        overlay.classList.remove(\"sl-theme-dark\");\r\n        overlay.classList.add(\"sl-theme-light\");\r\n        overlay.style.color = \"black\";\r\n        logger.info(`SL theme switching: Light`);\r\n      }\r\n      if (theme.startsWith(\"Dark\") && !!overlay && !overlay.classList.contains(\"sl-theme-dark\")) {\r\n        overlay.classList.remove(\"sl-theme-light\");\r\n        overlay.classList.add(\"sl-theme-dark\");\r\n        overlay.style.color = \"white\";\r\n        logger.info(`SL theme switching: Dark`);\r\n      }\r\n    }\r\n    return next(args);\r\n  });\r\n};\r\n\r\nexport default initHooks;\r\n\r\nconst reportWebhookURL = `https://discord.com/api/webhooks/1340000414506029162/aqt7qruFnzDMM5BN_kLtv9gCcallIF-JeRVYl9k23uSIlxrHRvcFMy5mtPUPGDpWZhHX`;\r\nconst lastDetectedErrors: string[] = [];\r\n\r\nwindow.addEventListener(\"error\", async (e) => {\r\n  console.error(e.filename);\r\n  if (!e.filename.toLowerCase().includes(\"abcl\")) return;\r\n  const detectedError = `${e.message} at ${e.filename} ${e.lineno}`;\r\n  if (lastDetectedErrors.includes(detectedError)) return;\r\n  lastDetectedErrors.push(detectedError);\r\n  const body = {\r\n    username: `${Player.Name} ${Player.Nickname === \"\" ? \"\" : `aka ${Player.Nickname}`\r\n      } (${Player.MemberNumber})`,\r\n    thread_name: `${modIdentifier} ${modVersion} Error ${e.message}`.slice(\r\n      0,\r\n      100\r\n    ),\r\n    content: `\r\n    error: ${detectedError}\r\n\\`\\`\\`\r\n${e.error.stack}\r\n\\`\\`\\`\r\nmods: ${bcModSdk\r\n        .getModsInfo()\r\n        .map((m) => m.name)\r\n        .join(\", \")}`,\r\n  };\r\n  await fetch(reportWebhookURL, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n});\r\n","export function drawCheckbox(\r\n  left: number,\r\n  top: number,\r\n  width: number,\r\n  height: number,\r\n  text: string,\r\n  isChecked: boolean,\r\n  isDisabled: boolean = false,\r\n  textColor = \"Black\",\r\n  textLeft: number = 10,\r\n  textTop: number = 45\r\n): void {\r\n  DrawText(text, left + textLeft, top + textTop, textColor, \"Gray\");\r\n  DrawButton(\r\n    left,\r\n    top,\r\n    width,\r\n    height,\r\n    \"\",\r\n    isDisabled ? \"#ebebe4\" : \"White\",\r\n    isChecked ? \"Icons/Checked.png\" : \"\",\r\n    undefined,\r\n    isDisabled\r\n  );\r\n}\r\n","import { drawCheckbox } from \"../../core/bcUI\";\r\nimport { abclPlayer } from \"../../core/player/player\";\r\nimport { defaultSettings } from \"../../core/settings\";\r\nimport { ModName } from \"../../types/definitions\";\r\nexport function getMetabolismValue(\r\n  value: MetabolismSettingValues,\r\n  next: boolean\r\n): MetabolismSettingValues {\r\n  if (next) {\r\n    const metabolismMap: Record<\r\n      MetabolismSettingValues,\r\n      MetabolismSettingValues\r\n    > = {\r\n      Slow: \"Normal\",\r\n      Normal: \"Fast\",\r\n      Fast: \"Faster\",\r\n      Faster: \"Fastest\",\r\n      Fastest: \"Slow\",\r\n    };\r\n    return metabolismMap[value];\r\n  }\r\n  const metabolismMap: Record<\r\n    MetabolismSettingValues,\r\n    MetabolismSettingValues\r\n  > = {\r\n    Slow: \"Fastest\",\r\n    Normal: \"Slow\",\r\n    Fast: \"Normal\",\r\n    Faster: \"Fast\",\r\n    Fastest: \"Faster\",\r\n  };\r\n  return metabolismMap[value];\r\n}\r\n\r\nexport const initSettingsScreen = async () => {\r\n  PreferenceRegisterExtensionSetting({\r\n    Identifier: modIdentifier,\r\n    ButtonText: `${ModName} Settings`,\r\n    Image: `${publicURL}/abcl.png`,\r\n    run: () => {\r\n      drawCheckbox(\r\n        150,\r\n        130,\r\n        65,\r\n        65,\r\n        \"Disable wetting\",\r\n        abclPlayer.settings.DisableWetting,\r\n        false,\r\n        \"black\",\r\n        230,\r\n        35\r\n      );\r\n      drawCheckbox(\r\n        150,\r\n        250,\r\n        65,\r\n        65,\r\n        \"Disable soiling\",\r\n        abclPlayer.settings.DisableSoiling,\r\n        false,\r\n        \"black\",\r\n        230,\r\n        35\r\n      );\r\n      DrawText(\r\n        \"Metabolism, the speed of your bladder/bowel filling up\",\r\n        560,\r\n        420,\r\n        \"black\"\r\n      );\r\n      DrawBackNextButton(\r\n        150,\r\n        450,\r\n        580,\r\n        90,\r\n        abclPlayer.settings.Metabolism,\r\n        \"white\",\r\n        \"\",\r\n        () => getMetabolismValue(abclPlayer.settings.Metabolism, false),\r\n        () => getMetabolismValue(abclPlayer.settings.Metabolism, true)\r\n      );\r\n      DrawButton(1815, 75, 90, 90, \"\", \"White\", \"Icons/Exit.png\");\r\n    },\r\n    click: () => {\r\n      if (MouseIn(150, 130, 65, 65)) {\r\n        abclPlayer.settings.DisableWetting =\r\n          !abclPlayer.settings.DisableWetting;\r\n      }\r\n      if (MouseIn(150, 250, 65, 65)) {\r\n        abclPlayer.settings.DisableSoiling =\r\n          !abclPlayer.settings.DisableSoiling;\r\n      }\r\n\r\n      if (MouseIn(150, 450, 580 / 2, 90)) {\r\n        abclPlayer.settings.Metabolism = getMetabolismValue(\r\n          abclPlayer.settings.Metabolism,\r\n          false\r\n        );\r\n      }\r\n      if (MouseIn(150 + 580 / 2, 450, 580 / 2, 90)) {\r\n        abclPlayer.settings.Metabolism = getMetabolismValue(\r\n          abclPlayer.settings.Metabolism,\r\n          true\r\n        );\r\n      }\r\n      if (MouseIn(1815, 75, 90, 90)) PreferenceSubscreenExtensionsExit();\r\n    },\r\n    exit: () => {\r\n      return true;\r\n    },\r\n    load: () => {},\r\n  });\r\n};\r\n","const sliders = [\r\n  {\r\n    className: \"SoilinessPercentage\",\r\n    primary: \"#d1aa98ff\",\r\n    secondary: \"#ab674aff\",\r\n  },\r\n  {\r\n    className: \"WetnessPercentage\",\r\n    primary: \"#f3e1aeff\",\r\n    secondary: \"#e7c463ff\",\r\n  },\r\n  {\r\n    className: \"BowelFullness\",\r\n    primary: \"#b7795cff\",\r\n    secondary: \"#7c4c36ff\",\r\n  },\r\n  {\r\n    className: \"BladderFullness\",\r\n    primary: \"#eacd73ff\",\r\n    secondary: \"#cba01eff\",\r\n  },\r\n  {\r\n    className: \"Incontinence\",\r\n    primary: \"#eeacacff\",\r\n    secondary: \"#cb5b5bff\",\r\n  },\r\n  {\r\n    className: \"MentalRegression\",\r\n    primary: \"#e6bff1ff\",\r\n    secondary: \"#ad74beff\",\r\n  },\r\n];\r\nlet cssSliders = \"\";\r\nfor (const slider of sliders) {\r\n  cssSliders += `\r\n  .${modIdentifier}${slider.className} {\r\n    margin-bottom: 10px;\r\n    margin-top: 3px;\r\n  }\r\n\t.${modIdentifier}${slider.className}::part(base) {\r\n\t\tbackground-color: ${slider.primary};\r\n\t}\r\n  .${modIdentifier}${slider.className}::part(indicator) {\r\n    background-color: ${slider.secondary};\r\n  }`;\r\n}\r\n\r\nexport const css = `\r\n\r\n#ABCLCurrentPlayerSelect {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.ABCLOverlay {\r\n\taspect-ratio: 2/1;\r\n\tmax-width: 100%;\r\n\tmax-height: 100%;\r\n\tmargin: auto;\r\n\tposition: relative;\r\n\ttransform: translateY(-50%);\r\n\ttop: 50%;\r\n\tpointer-events: none;\r\n  font-family: arial;\r\n  \r\n}\r\n.ABCLWindowHeaderTitle {\r\n  margin: 5px;\r\n  font-size: 32px;\r\n  font-weight: bold;\r\n}\r\n\r\n.ABCLOpenStatsButton {\r\n  position: fixed;\r\n  bottom: 10px;\r\n  right: 10px;\r\n  z-index: 1000;\r\n  aspect-ratio: 1/1;\r\n  width: 4%;\r\n  white-space: collapse;\r\n  text-align: center;\r\n  border-radius: 5px;\r\n  background: #ffffffa6;\r\n  border: #e3e3e3 1px solid;\r\n  backdrop-filter: blur(4px);\r\n  pointer-events: all;\r\n  font-size: clamp(9px, 1.3vw, 43px);\r\n  cursor: pointer;\r\n}\r\n.ABCLOpenStatsButton:hover {\r\n  background: #ffffffd1;\r\n}\r\n.ABCLWindowClose {\r\n  aspect-ratio: 1/1;\r\n  background: transparent;\r\n  height: 29px;\r\n  border-radius: 0px 4px 0 0;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 0px;\r\n  border: none;\r\n  border-left: 1px #0000003d solid;\r\n}\r\n.ABCLWindowMinimize {\r\n  aspect-ratio: 1/1;\r\n  background: transparent;\r\n  height: 29px;\r\n  border-radius: 0px 0px 0 0;\r\n  position: absolute;\r\n  right: 30px;\r\n  top: 0px;\r\n  border: none;\r\n  border-left: 1px #0000003d solid;\r\n}\r\n.ABCLWindowHeader {\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr 29px 24px;\r\n  margin: -6px;\r\n  padding: 5px;\r\n  border: 1px #0000003d solid;\r\n  border-radius: 6px 6px 0 0;\r\n}\r\n.ABCLNotification {\r\n\tbackground-color: white;\r\n\twidth: fit-content;\r\n\ttext-align: center;\r\n\tmargin: auto;\r\n\tz-index: 10000;\r\n\tposition: absolute;\r\n\tbottom: 30px;\r\n\tleft: 25%;\r\n\ttransform: translateX(-50%);\r\n\tborder: 1px solid black;\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 30px 1fr;\r\n\tpadding: 5px;\r\n\tpointer-events: all;\r\n}\r\n\r\n.ABCLPrompt {\r\n  background: white;\r\n  width: fit-content;\r\n  padding: 6px;\r\n  border: 1px solid black;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 25%;\r\n  transform: translate(-50%, -50%);\r\n\tpointer-events: all;\r\n}\r\n.ABCLButton {\r\n  border: 1px #020202 solid;\r\n  padding: 3px;\r\n  margin: 4px;\r\n  aspect-ratio: 3/2;\r\n  width: 38px;\r\n  cursor: pointer;\r\n}\r\n.ABCLPromptYes {\r\n  background: #5ae85a;\r\n  color: black;\r\n}\r\n.ABCLPromptNo {\r\n  background: #ff4b4b;\r\n  color: white;\r\n}\r\n\r\n.ABCLClose:hover {\r\n  background: #ff4b4b;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.ABCLStatsWindow {\r\n  width: 200px;\r\n  height: fit-content;\r\n  padding: 5px;\r\n  background: #ffffffa6;\r\n  border: #e3e3e3 1px solid;\r\n  pointer-events: all;\r\n  position: fixed;\r\n  backdrop-filter: blur(4px);\r\n  border-radius: 6px;\r\n  box-shadow: 0 4px 5px 1px #00000014;\r\n}\r\n\r\n\r\n${cssSliders}\r\n\r\n.ABCLHidden {\r\n  display: none !important;\r\n}\r\n`;\r\n","import { activities } from \"../activities\";\r\nimport { changeDiaper, hasDiaper } from \"../player/diaper\";\r\nimport { abclPlayer } from \"../player/player\";\r\nimport { sendChatLocal } from \"../utils\";\r\nexport const initActivitiesData = (): void => {\r\n  activities[\"ChangeDiaper\"] = {\r\n    Name: \"Change Diaper\",\r\n    Image: `${publicURL}/activity/changeDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      console.log(\"Change diaper clicked\", player);\r\n      changeDiaper(player);\r\n    },\r\n    Target: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n\r\n  activities[\"UsePotty\"] = {\r\n    Name: \"Sit and Use Potty\",\r\n    Image: `${publicURL}/activity/potty-temp.png`,\r\n    OnClick: (player: Character) => {\r\n      const isTooEarly =\r\n        abclPlayer.stats.BladderFullness < 0.3 &&\r\n        abclPlayer.stats.BowelFullness < 0.3;\r\n      const isPossible = !isTooEarly;\r\n      const isGood =\r\n        abclPlayer.stats.BladderFullness > 0.6 ||\r\n        abclPlayer.stats.BowelFullness > 0.6;\r\n      const isEmbarrassed = abclPlayer.stats.MentalRegression < 0.3;\r\n      const isTooFarGone = abclPlayer.stats.MentalRegression > 0.9;\r\n      if (isTooEarly) {\r\n        sendChatLocal(\"You sit down but you can't seem to get anything out.\");\r\n        return;\r\n      }\r\n      if (isPossible) {\r\n        abclPlayer.stats.BladderFullness = 0;\r\n        abclPlayer.stats.BowelFullness = 0;\r\n        sendChatLocal(\"You sit down and use the potty.\");\r\n      }\r\n      if (isEmbarrassed) {\r\n        abclPlayer.stats.MentalRegression += 0.04;\r\n      }\r\n      if (isGood && !isTooFarGone) {\r\n        abclPlayer.stats.MentalRegression -= 0.02;\r\n        abclPlayer.stats.Incontinence -= 0.02;\r\n      }\r\n    },\r\n    TargetSelf: [\"ItemButt\"],\r\n\r\n    Criteria: (player) => {\r\n      return true;\r\n    },\r\n  };\r\n  activities[\"UseToilet\"] = {\r\n    Name: \"Sit and Use Toilet\",\r\n    Image: `${publicURL}/activity/toilet-temp.png`,\r\n    OnClick: (player: Character) => {\r\n      const isTooEarly =\r\n        abclPlayer.stats.BladderFullness < 0.3 &&\r\n        abclPlayer.stats.BowelFullness < 0.3;\r\n      const isPossible = !isTooEarly;\r\n      const isGood =\r\n        abclPlayer.stats.BladderFullness > 0.6 ||\r\n        abclPlayer.stats.BowelFullness > 0.6;\r\n      if (isTooEarly) return;\r\n      if (isPossible) {\r\n        abclPlayer.stats.BladderFullness = 0;\r\n        abclPlayer.stats.BowelFullness = 0;\r\n        sendChatLocal(\"You sit down and use the toilet.\");\r\n      }\r\n      if (isGood) {\r\n        abclPlayer.stats.MentalRegression -= 0.02;\r\n        abclPlayer.stats.Incontinence -= 0.02;\r\n      }\r\n    },\r\n    TargetSelf: [\"ItemButt\"],\r\n    Criteria: (player) => {\r\n      if (abclPlayer.stats.MentalRegression > 0.3) {\r\n        sendChatLocal(\r\n          \"You try to use the toilet but you can't seem to get anything out.\"\r\n        );\r\n      }\r\n      return abclPlayer.stats.MentalRegression < 0.3;\r\n    },\r\n  };\r\n  activities[\"WetDiaper\"] = {\r\n    Name: \"Wet Diaper\",\r\n    Image: `${publicURL}/activity/wetDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      abclPlayer.releaseBladder();\r\n    },\r\n    TargetSelf: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n\r\n  activities[\"SoilDiaper\"] = {\r\n    Name: \"Soil Diaper\",\r\n    Image: `${publicURL}/activity/soilDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      abclPlayer.releaseBowel();\r\n    },\r\n    TargetSelf: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n};\r\n","import { initActivitiesData } from \"./data/activities-data\";\r\nimport { bcModSDK, waitForElement } from \"./utils\";\r\nexport type ABCLActivity = {\r\n  Name: string;\r\n  Image: string;\r\n  OnClick?: (player: Character, group: AssetGroupItemName) => void;\r\n  Target?: AssetGroupItemName[];\r\n  TargetSelf?: AssetGroupItemName[];\r\n  Criteria?: (player: Character) => boolean;\r\n};\r\nexport const insertActivityButton = (\r\n  name: string,\r\n  id: string,\r\n  src: string,\r\n  onClick?: (player: Character, group: AssetGroupItemName) => void\r\n): HTMLButtonElement => {\r\n  const button = document.createElement(\"button\");\r\n  button.id = id;\r\n  button.name = `${modIdentifier}_${name}`;\r\n  button.dataset.group = \"ItemArms\";\r\n  button.className = `blank-button button button-styling HideOnPopup dialog-grid-button`;\r\n  button.innerHTML = `<img decoding=\"async\" loading=\"lazy\" src=\"${src}\" class=\"button-image\"><span class=\"button-label button-label-bottom\">${name}</span>`;\r\n\r\n  button.addEventListener(\"click\", (e) => {\r\n    const player = CurrentCharacter ?? Player;\r\n    const focusGroup = player?.FocusGroup?.Name;\r\n    if (!onClick || !focusGroup) return;\r\n    onClick(player, focusGroup);\r\n    DialogLeave();\r\n  });\r\n\r\n  return button;\r\n};\r\n\r\nexport const activityInGroup = (\r\n  activity: ABCLActivity,\r\n  group: AssetGroupItemName\r\n): boolean => {\r\n  return Boolean(\r\n    activity.Target?.includes(group) ||\r\n      (activity.TargetSelf?.includes(group) &&\r\n        Player.MemberNumber === CurrentCharacter?.MemberNumber)\r\n  );\r\n};\r\nexport const activityIsInserted = (id: string): boolean => {\r\n  return Boolean(document.getElementById(id));\r\n};\r\nexport const activityFitsCriteria = (\r\n  activity: ABCLActivity,\r\n  player: Character\r\n): boolean => {\r\n  if (!player) {\r\n    return false;\r\n  }\r\n  return Boolean(\r\n    (!activity.Criteria || activity.Criteria(player)) &&\r\n      player.FocusGroup &&\r\n      activityInGroup(activity, player.FocusGroup.Name)\r\n  );\r\n};\r\nexport const activities: Record<string, ABCLActivity> = {};\r\n\r\nexport const initActivities = (): void => {\r\n  /** clickedObj becomes null with custom activities */\r\n  initActivitiesData();\r\n  bcModSDK.hookFunction(\r\n    \"DialogMenuMapping.activities.GetClickStatus\",\r\n    1,\r\n    (args, next) => {\r\n      const [_C, _clickedObj, _equippedItem] = args;\r\n      if (!_clickedObj) return null;\r\n      return next(args);\r\n    }\r\n  );\r\n\r\n  bcModSDK.hookFunction(\"DialogChangeMode\", 1, async (args, next) => {\r\n    const [_mode] = args;\r\n    next(args);\r\n    if (_mode !== \"activities\") return;\r\n\r\n    const activityGrid = await waitForElement(\"#dialog-activity-grid\");\r\n    const focusGroup = CurrentCharacter?.FocusGroup?.Name;\r\n    if (!focusGroup) return;\r\n    Object.entries(activities).forEach(([id, activity]) => {\r\n      if (activityFitsCriteria(activity, CurrentCharacter ?? Player)) {\r\n        if (!activityIsInserted(id)) {\r\n          activityGrid.appendChild(\r\n            insertActivityButton(\r\n              activity.Name,\r\n              id,\r\n              activity.Image,\r\n              activity.OnClick\r\n            )\r\n          );\r\n        }\r\n      }\r\n    });\r\n  });\r\n};\r\n","// from LSCG - https://github.com/littlesera/LSCG/blob/8072c4d636a66bf12473823722afbc82fda8f98e/src/MiniGames/minigames.ts#L3C1-L3C87\r\n\r\nimport { hasDiaper, incontinenceOnAccident } from \"./player/diaper\";\r\nimport { abclPlayer } from \"./player/player\";\r\nimport { bcModSDK, sendChatLocal } from \"./utils\";\r\n\r\n// for minigame text loading\r\nbcModSDK.hookFunction(\"TextLoad\", 5, (args, next) => {\r\n  if (CurrentScreen === \"WetMinigame\" || CurrentScreen === \"MessMinigame\")\r\n    return;\r\n  else return next(args);\r\n});\r\nexport const initMinigames = () => {\r\n  registerMiniGame(new MessMinigame());\r\n  registerMiniGame(new WetMinigame());\r\n};\r\nexport function registerMiniGame<T extends BaseMiniGame>(miniGame: T) {\r\n  var name = miniGame.name;\r\n  console.log(\"Registering minigame: \" + name);\r\n  (<any>window)[name + \"Run\"] = () => miniGame.Run();\r\n  (<any>window)[name + \"Click\"] = () => miniGame.Click();\r\n  (<any>window)[name + \"Load\"] = () => miniGame.Load();\r\n  (<any>window)[name + \"Unload\"] = () => miniGame.Unload();\r\n  (<any>window)[name + \"Resize\"] = () => miniGame.Resize();\r\n  (<any>window)[name + \"KeyDown\"] = () => miniGame.KeyDown();\r\n  (<any>window)[name + \"Exit\"] = () => miniGame.Exit();\r\n  (<any>window)[name + \"End\"] = (victory: boolean) => miniGame.End(victory);\r\n}\r\n\r\nexport abstract class BaseMiniGame {\r\n  name: string = \"\";\r\n\r\n  abstract Run(): void;\r\n  abstract Click(): void;\r\n  Load() {}\r\n  Unload() {}\r\n  Resize() {}\r\n  KeyDown() {}\r\n  Exit() {}\r\n  End(victory: boolean) {}\r\n}\r\n\r\nexport abstract class AccidentMiniGame extends BaseMiniGame {\r\n  startText: string = \"\";\r\n  hintText: string = \"\";\r\n  failText: string = \"\";\r\n  successText: string = \"\";\r\n\r\n  tintColor = [{ r: 0, g: 0, b: 0, a: 0 }];\r\n\r\n  GameStartTime: number = 0;\r\n  GameEndTime: number = 0;\r\n\r\n  StartDelay: number = 4000;\r\n  AccidentVelocity = 0;\r\n  AccidentPosition = 0;\r\n  AccidentAcceleration = 0;\r\n  AccidentMaxPosition = 100;\r\n  AccidentGameDuration = 5000;\r\n  AccidentNextTick = 0;\r\n  AccidentText = \"\";\r\n  AccidentChallenge = 0;\r\n\r\n  BaseGameLength: number = 6000;\r\n\r\n  End(Victory: boolean) {\r\n    CommonSetScreen(\"Online\", \"ChatRoom\");\r\n    MiniGameVictory = Victory;\r\n    MiniGameEnded = true;\r\n    MiniGameTimer = CommonTime();\r\n    this.GameEndTime = MiniGameTimer;\r\n  }\r\n  get IsStartDelay() {\r\n    return CommonTime() < this.GameStartTime;\r\n  }\r\n  Load(): void {\r\n    DrawFlashScreen(\"#000000\", 750, 1000);\r\n\r\n    this.GameStartTime = CommonTime() + this.StartDelay;\r\n    this.AccidentVelocity = 0;\r\n    this.AccidentAcceleration = 0;\r\n    if (typeof MiniGameDifficulty != \"number\") {\r\n      MiniGameTimer = CommonTime() + this.BaseGameLength; // 5 seconds base\r\n      this.AccidentChallenge = 5;\r\n    } else {\r\n      var difficultyTimeAdd = (MiniGameDifficulty - 8) * 0.25;\r\n      this.AccidentGameDuration =\r\n        this.BaseGameLength + 1000 * difficultyTimeAdd;\r\n      MiniGameTimer = this.GameStartTime + this.AccidentGameDuration; // One extra second per challenge level, minus a third of a second per willpower.\r\n      this.AccidentChallenge = MiniGameDifficulty;\r\n    }\r\n\r\n    this.AccidentMaxPosition = 400;\r\n    this.AccidentPosition = this.AccidentMaxPosition;\r\n\r\n    console.info(\r\n      \"Accident minigame started: difficulty - \" +\r\n        this.AccidentChallenge +\r\n        \" time - \" +\r\n        this.AccidentGameDuration\r\n    );\r\n  }\r\n  get IsGameActive() {\r\n    return CommonTime() < MiniGameTimer && !MiniGameEnded && !this.GameFailed;\r\n  }\r\n\r\n  get IsGameTimeout() {\r\n    return CommonTime() >= MiniGameTimer && !MiniGameEnded;\r\n  }\r\n\r\n  get IsEndGameReport() {\r\n    return CommonTime() < this.GameEndTime + 5000;\r\n  }\r\n\r\n  get GameFailed() {\r\n    return this.AccidentPosition <= 0;\r\n  }\r\n\r\n  RunGame(delta: number) {\r\n    var timeElapsed =\r\n      (this.AccidentGameDuration + CommonTime() - MiniGameTimer) / 1000;\r\n\r\n    // Adjust acceleration every .4s ticks\r\n    if (CommonTime() > this.AccidentNextTick) {\r\n      this.AccidentNextTick = CommonTime() + 400;\r\n      this.AccidentAcceleration =\r\n        -(this.AccidentChallenge * 1.25) - timeElapsed * Math.random();\r\n    }\r\n    this.AccidentVelocity = Math.min(\r\n      this.AccidentVelocity,\r\n      this.AccidentVelocity + this.AccidentAcceleration * 0.25\r\n    );\r\n    if (this.AccidentPosition >= this.AccidentMaxPosition)\r\n      this.AccidentVelocity = Math.min(0, this.AccidentVelocity);\r\n\r\n    if (this.AccidentPosition > 0) {\r\n      this.AccidentPosition += (this.AccidentVelocity / 1000) * delta * 3.5;\r\n    }\r\n\r\n    this.AccidentPosition = Math.max(\r\n      0,\r\n      Math.min(this.AccidentPosition, this.AccidentMaxPosition)\r\n    );\r\n\r\n    DrawProgressBar(\r\n      500 - this.AccidentMaxPosition,\r\n      800,\r\n      2 * this.AccidentMaxPosition,\r\n      50,\r\n      100 * (this.AccidentPosition / this.AccidentMaxPosition)\r\n    );\r\n    DrawText(this.hintText, 500, 875, \"white\", \"black\");\r\n\r\n    // var debugStr = \"Chal: \" + this.AccidentChallenge + \" Pos: \" + this.AccidentPosition + \" Vel: \" + this.AccidentVelocity + \" Acc: \" + this.AccidentAcceleration;\r\n    // var prev = MainCanvas.textAlign;\r\n    // MainCanvas.textAlign = \"left\";\r\n    // DrawText(debugStr, 0, 100, \"White\", \"Black\");\r\n    // MainCanvas.textAlign = prev;\r\n    // console.info(debugStr);\r\n  }\r\n\r\n  Run() {\r\n    ChatRoomRun(CommonTime());\r\n\r\n    if (this.IsStartDelay) {\r\n      DrawText(this.startText, 500, 500, \"white\", \"black\");\r\n    } else if (this.IsGameActive) {\r\n      this.RunGame(TimerRunInterval);\r\n    } else if ((this.IsGameTimeout || this.GameFailed) && !MiniGameEnded) {\r\n      this.End(this.AccidentPosition > 0);\r\n      MiniGameEnd();\r\n    }\r\n  }\r\n\r\n  Click() {\r\n    //CommonIsMobile\r\n    if (this.IsGameActive)\r\n      this.AccidentVelocity = Math.max(\r\n        this.AccidentVelocity + (getRandomInt(11) + 5),\r\n        20\r\n      );\r\n  }\r\n}\r\nfunction getRandomInt(max: number): number {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\nexport class MessMinigame extends AccidentMiniGame {\r\n  startText: string = \"A sudden pressure builds within you...\";\r\n  hintText: string = \"Click to maintain control. Keep it together!\";\r\n  failText: string = \"Oops! You've had an accident!\";\r\n  successText: string = \"Crisis averted! You stayed composed!\";\r\n  name = \"MessMinigame\";\r\n  End(victory: boolean) {\r\n    super.End(victory);\r\n    if (victory) {\r\n      abclPlayer.stats.Incontinence -= incontinenceOnAccident() / 2;\r\n      sendChatLocal(\"You managed to keep it together!\");\r\n      return;\r\n    }\r\n\r\n    if (hasDiaper()) {\r\n      abclPlayer.stats.SoilinessValue += abclPlayer.stats.BowelValue;\r\n      sendChatLocal(\"You've had a messy accident!\");\r\n    } else {\r\n      //TODO add soiling clothes\r\n      sendChatLocal(\r\n        \"You've had an messy accident in your clothes! [not yet implemented]\"\r\n      );\r\n    }\r\n    abclPlayer.stats.Incontinence += incontinenceOnAccident();\r\n    abclPlayer.stats.BowelValue = 0;\r\n    abclPlayer.onAccident();\r\n  }\r\n}\r\n\r\nexport class WetMinigame extends AccidentMiniGame {\r\n  startText: string = \"You feel a trickle starting...\";\r\n  hintText: string = \"Click to squeeze tight. Don't let it get away!\";\r\n  failText: string = \"Oh no! You lost control!\";\r\n  successText: string = \"You held it in! Phew!\";\r\n  name = \"WetMinigame\";\r\n  End(victory: boolean) {\r\n    super.End(victory);\r\n    if (victory) {\r\n      abclPlayer.stats.Incontinence -= incontinenceOnAccident() / 2;\r\n      sendChatLocal(\"You managed to hold it in!\");\r\n      return;\r\n    }\r\n\r\n    if (hasDiaper()) {\r\n      abclPlayer.stats.WetnessValue += abclPlayer.stats.BladderValue;\r\n      sendChatLocal(\"You've had a wet accident!\");\r\n    } else {\r\n      //TODO add wetting clothes\r\n      sendChatLocal(\r\n        \"You've had a wet accident in your clothes! [not yet implemented]\"\r\n      );\r\n    }\r\n\r\n    abclPlayer.stats.Incontinence += incontinenceOnAccident();\r\n    abclPlayer.stats.BladderValue = 0;\r\n    abclPlayer.onAccident();\r\n  }\r\n}\r\n","import { clearData, mutateData, saveData } from \"./settings\";\r\n(<any>window).clearData = clearData;\r\n(<any>window).saveData = saveData;\r\n(<any>window).mutateData = mutateData;\r\n\r\n(<any>window).noOp = () => {};\r\n","import initHooks from \"./core/hooks\";\r\nimport { logger } from \"./core/logger\";\r\nimport { loadOrGenerateData } from \"./core/settings\";\r\nimport { bcModSDK, isObject } from \"./core/utils\";\r\nimport { initScreens } from \"./screens\";\r\nimport { initSettingsScreen } from \"./screens/Settings\";\r\nimport { css } from \"./screens/styles/css\";\r\nimport abclData from \"./assets/dictionary.json\" assert { type: \"json\" };\r\nimport { initActivities } from \"./core/activities\";\r\nimport { initMinigames } from \"./core/minigames\";\r\nimport { abclPlayer } from \"./core/player/player\";\r\nimport \"./core/globalExpose\";\r\nimport { initOverlay } from \"./core/player/ui\";\r\nexport type AbclData = typeof abclData;\r\nexport const ABCLdata: AbclData = abclData;\r\n\r\nexport const updateInterval = 60 * 1000;\r\nconst initWait = () => {\r\n  logger.info(`Waiting for possible login...`);\r\n  if (CurrentScreen == null || CurrentScreen === \"Login\") {\r\n    bcModSDK.hookFunction(\"LoginResponse\", 0, (args, next) => {\r\n      next(args);\r\n      const response = args[0];\r\n      if (\r\n        isObject(response) &&\r\n        typeof response.Name === \"string\" &&\r\n        typeof response.AccountName === \"string\"\r\n      ) {\r\n        if (window.modLoadFlag) return;\r\n        init();\r\n      }\r\n    });\r\n  } else {\r\n    logger.info(`${modIdentifier}: Already logged in, loading...`);\r\n    init();\r\n  }\r\n};\r\nconst loop = () => {\r\n  if (CurrentScreen !== \"ChatRoom\") {\r\n    return;\r\n  }\r\n  abclPlayer.update();\r\n};\r\n\r\nconst init = () => {\r\n  const currentAccount = Player.MemberNumber;\r\n  if (currentAccount === null) {\r\n    logger.error(\"No player MemberNumber\");\r\n    throw new Error(\"No player MemberNumber\");\r\n  }\r\n\r\n  bcModSDK.hookFunction(\"LoginResponse\", 0, (args, next) => {\r\n    const response = args[0];\r\n    if (\r\n      isObject(response) &&\r\n      typeof response.Name === \"string\" &&\r\n      typeof response.AccountName === \"string\" &&\r\n      response.MemberNumber !== currentAccount\r\n    ) {\r\n      const error = `Attempting to load ${modIdentifier} with different account than already loaded (${response.MemberNumber} vs ${currentAccount}). This is not supported, please refresh the page.`;\r\n      logger.error(error);\r\n      alert(error);\r\n      throw new Error(error);\r\n    }\r\n    return next(args);\r\n  });\r\n\r\n  const shoelaceCSSLight = document.createElement(\"link\");\r\n  shoelaceCSSLight.rel = \"stylesheet\";\r\n  shoelaceCSSLight.href =\r\n    \"https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/themes/light.css\";\r\n    // shoelaceCSSLight.media = \"(prefers-color-scheme:light)\";\r\n  document.head.appendChild(shoelaceCSSLight);\r\n\r\n  const shoelaceCSSDark = document.createElement(\"link\");\r\n  shoelaceCSSDark.rel = \"stylesheet\";\r\n  shoelaceCSSDark.href =\r\n    \"https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/themes/dark.css\";\r\n    // shoelaceCSSDark.media = \"(prefers-color-scheme:dark)\";\r\n  document.head.appendChild(shoelaceCSSDark);\r\n\r\n  const shoelaceScript = document.createElement(\"script\");\r\n  shoelaceScript.src =\r\n    \"https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/shoelace-autoloader.js\";\r\n  shoelaceScript.type = \"module\";\r\n  shoelaceScript.async = true;\r\n  document.head.appendChild(shoelaceScript);\r\n\r\n  const injectedStyles = document.createElement(\"style\");\r\n  injectedStyles.innerHTML = css;\r\n  document.head.appendChild(injectedStyles);\r\n\r\n  ServerPlayerSync();\r\n  loadOrGenerateData();\r\n  initSettingsScreen();\r\n  initScreens([]);\r\n  initHooks();\r\n  logger.info(`Ready.`);\r\n  window.modLoadFlag = true;\r\n  initActivities();\r\n  initMinigames();\r\n  initOverlay();\r\n  setInterval(loop, updateInterval);\r\n};\r\n\r\ninitWait();\r\n","import { bcModSDK } from \"../core/utils\";\r\nimport { ModScreen } from \"../types/types\";\r\n\r\nexport const initScreens = (screens: ModScreen[]) => {\r\n  bcModSDK.hookFunction(\"TextLoad\", 5, (args, next) => {\r\n    if (\r\n      screens.some(\r\n        (screen) =>\r\n          screen.module === CurrentModule && screen.id === CurrentScreen\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return next(args);\r\n  });\r\n\r\n  screens.forEach((screen) => {\r\n    (<any>window)[`${screen.id}Background`] = \"Sheet\";\r\n\r\n    const { KeyUp, Click, ...rest } = screen.functions;\r\n\r\n    const injectedScreenFunctions = {\r\n      ...rest,\r\n      KeyUp: (event: KeyboardEvent) => {\r\n        if (event.key === \"Escape\") {\r\n          (<any>window)[`${screen.id}Exit`]();\r\n        }\r\n\r\n        KeyUp?.(event);\r\n      },\r\n      Click: (event: MouseEvent) => {\r\n        if (MouseIn(1815, 75, 90, 90)) {\r\n          (<any>window)[`${screen.id}Exit`]();\r\n        }\r\n        Click?.(event);\r\n      },\r\n    };\r\n\r\n    (<any>window)[`${screen.id}ScreenFunctions`] = injectedScreenFunctions;\r\n\r\n    Object.entries(injectedScreenFunctions).forEach(([key, value]) => {\r\n      (<any>window)[`${screen.id}${key}`] = value;\r\n    });\r\n  });\r\n};\r\n"],"names":["o","e","alert","Error","console","error","t","TextEncoder","n","Array","isArray","r","Set","filter","has","add","i","Map","a","c","warn","s","f","values","patching","get","name","push","hooks","patches","entries","set","sort","priority","size","toString","replaceAll","includes","eval","original","m","errorReporterHooks","hookChainExit","call","apply","this","length","hookEnter","mod","hook","arguments","patchesSources","enter","final","l","precomputed","window","split","slice","join","encode","padStart","toUpperCase","d","originalHash","Object","assign","router","context","contextProperty","p","sdkEntrypoint","currentEntrypoint","hookedByMods","map","patchedByMods","from","u","delete","loaded","g","fullName","version","repository","allowReplace","apiEndpointEnter","unload","hookFunction","indexOf","splice","patchFunction","removePatches","clear","callOriginal","globalThis","getOriginalHash","api","freeze","h","y","bcModSdk","apiVersion","registerMod","getModsInfo","getPatchingInfo","seal","defineProperty","exports","value","logger","constructor","logs","maxLogSize","log","level","message","logFunction","logEntry","timestamp","Date","toISOString","shift","info","debug","getLogs","ModName","PermissionLevels","freeGlobal","global","freeSelf","self","root","Function","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","undefined","nullTag","undefinedTag","baseGetTag","isOwn","tag","unmasked","result","getRawTag","objectToString","isObjectLike","isObject","type","identity","asyncTag","funcTag","genTag","proxyTag","isFunction","uid","coreJsData","maskSrcKey","exec","keys","IE_PROTO","funcToString","reIsHostCtor","funcProto","reIsNative","RegExp","replace","baseIsNative","func","test","toSource","getNative","object","key","getValue","objectCreate","create","baseCreate","proto","nativeNow","now","count","lastCalled","baseSetToString","string","configurable","enumerable","writable","setToString","stamp","remaining","MAX_SAFE_INTEGER","reIsUint","isIndex","baseAssignValue","eq","other","assignValue","objValue","nativeMax","Math","max","baseRest","start","transform","args","index","array","otherArgs","thisArg","overRest","isLength","isArrayLike","isPrototype","Ctor","baseIsArguments","propertyIsEnumerable","isArguments","isArguments$1","freeExports","nodeType","freeModule","module","Buffer","isBuffer","typedArrayTags","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","baseUnary","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","baseTimes","String","baseKeysIn","nativeKeysIn","isProto","keysIn","nativeCreate","Hash","entry","assocIndexOf","__data__","data","ListCache","pop","getMapData","MapCache","hash","getPrototype","arg","overArg","getPrototypeOf","objectTag","objectCtorString","Stack","pairs","LARGE_ARRAY_SIZE","allocUnsafe","Uint8Array","cloneTypedArray","typedArray","isDeep","arrayBuffer","buffer","byteLength","byteOffset","fromRight","baseFor","keysFunc","iterable","props","assignMergeValue","safeGet","toPlainObject","source","customizer","isNew","newValue","copyObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isTyped","copyArray","copy","cloneBuffer","isPlainObject","initCloneObject","baseMerge","assigner","merge","sources","guard","isIterateeCall","defaultSettings","Metabolism","permission","canView","Anyone","canModify","Owner","DisableWetting","Self","DisableSoiling","CaregiverIDs","OpenRemoteSettings","LockedOutOfSettings","defaultStats","Bladder","Bowel","Soiliness","Wetness","WaterIntake","FoodIntake","Incontinence","MentalRegression","defaultData","Settings","Stats","dataSaveTimeout","saveData","compressed","LZString","compressToBase64","JSON","stringify","Player","ExtensionSettings","clearTimeout","setTimeout","ServerPlayerExtensionSettingsSync","sendUpdateMyData","bcModSDK","bcModSdkRef","obj","sendChatLocal","ServerPlayerIsInChatRoom","msgElement","document","createElement","innerHTML","line","trim","classList","querySelector","appendChild","ElementScrollToEnd","waitForElement","async","selector","options","Promise","resolve","element","observer","MutationObserver","target","childCheck","childElementCount","disconnect","observe","body","childList","subtree","generateUniqueID","identifier","random","substr","pendingRequests","PendingRequest","timeout","requestTime","state","id","sync","Type","Content","Sender","MemberNumber","Target","Dictionary","ServerSend","cancel","getCharacter","memberNumber","character","ChatRoomCharacter","find","IsPlayer","getCharacterName","Nickname","Name","ABCLStatsWindow","folded","openButton","textContent","overlay","statsDrawer","addEventListener","update","getAttribute","removeAttribute","setAttribute","currentPlayerSelect","selectedCharacter","Number","ABCL","updateInput","className","round","input","label","valueRounded","EPSILON","innerText","hasDiaper","getPlayerDiaperSize","MovableElement","resizable","newX","newY","oldX","oldY","isDragging","isResizing","resizeDirection","edgeThreshold","onMouseDown","bind","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onMouseMoveForCursor","style","position","resize","event","removeEventListener","cursor","offsetX","offsetY","offsetWidth","offsetHeight","preventDefault","clientX","clientY","top","offsetTop","left","offsetLeft","deltaX","deltaY","getComputedStyle","parseInt","width","height","ABCLYesNoPrompt","onAccept","onDeny","prompt","show","remove","abclStatsWindow","ChatSettings","ColorTheme","startsWith","color","metabolismValues","abclPlayer","onAccident","stats","mentalRegressionOnAccident","mentalRegressionOvertime","BladderValue","settings","MetabolismValue","BowelValue","attemptWetting","attemptSoiling","playerSaver","save","limit","incontinenceLimitFormula","chance","incontinenceChanceFormula","BladderFullness","incontinenceCheck","check","MiniGameStart","BowelFullness","releaseBladder","isTooEarly","isPossible","isGood","WetnessValue","releaseBowel","SoilinessValue","BladderSize","updateDiaperColor","BowelSize","SoilinessPercentage","WetnessPercentage","addCaregiver","removeCaregiver","x","metabolism","allowedSaveInterval","lastSaveTime","allowedCallInterval","lastCallTime","reset","isReady","isLeaking","diaperSize","isDiaperDirty","isDiaper","item","Asset","Description","toLowerCase","ABCLdata","Diapers","player","pelvisItem","InventoryGet","panties","Boolean","averageColor","color_1","color_2","ratio","rgb_1","DrawHexToRGB","rgb_2","avgRgb","b","DrawRGBToHex","mixLevels","highLevel","midLevel","lowLevel","setDiaperColor","slot","primaryColor","secondaryColor","DefaultColor","diaper","Color","parse","messLevel","wetLevel","messColor","DiaperColors","wetColor","CharacterRefresh","ChatRoomCharacterUpdate","getDiaperSize","Property","TypeRecord","typed","DiaperSizeScale","heavy_adult","incontinence","fullness","threshold","pow","min","mentalRegressionBonus","assetDescriptions","Appearance","clothing","matches","BabyClothes","concat","description","some","assetDescription","toLocaleLowerCase","modifier","incontinenceOnAccident","stages","totalAccidents","end","changeDiaper","filterRestrictedSettings","myHighestPermission","IsOwnedByPlayer","IsLoverOfPlayer","Lovers","FriendList","Friends","ServerChatRoomGetAllowItem","ItemPermission","getMyMaxPermissionLevel","reduce","acc","sendServerChatRoomMessage","ChatRoomMessage","syncDataMessage","receivePacket","handleInitPacket","otherCharacter","handleSyncPacket","request","initHooks","cancelFunc","waitFor","ServerSocket","ServerIsConnected","next","_character","_slot","_asset","_result","MouseIn","theme","contains","lastDetectedErrors","filename","detectedError","lineno","username","thread_name","content","fetch","method","headers","drawCheckbox","text","isChecked","isDisabled","textColor","textLeft","textTop","DrawText","DrawButton","getMetabolismValue","Slow","Normal","Fast","Faster","Fastest","sliders","primary","secondary","cssSliders","slider","css","activityFitsCriteria","activity","Criteria","FocusGroup","group","TargetSelf","CurrentCharacter","activityInGroup","activities","initActivities","Image","OnClick","isEmbarrassed","isTooFarGone","_C","_clickedObj","_equippedItem","_mode","activityGrid","focusGroup","forEach","getElementById","activityIsInserted","src","onClick","button","dataset","DialogLeave","insertActivityButton","CurrentScreen","registerMiniGame","miniGame","Run","Click","Load","Unload","Resize","KeyDown","Exit","victory","End","BaseMiniGame","AccidentMiniGame","startText","hintText","failText","successText","tintColor","GameStartTime","GameEndTime","StartDelay","AccidentVelocity","AccidentPosition","AccidentAcceleration","AccidentMaxPosition","AccidentGameDuration","AccidentNextTick","AccidentText","AccidentChallenge","BaseGameLength","Victory","CommonSetScreen","MiniGameVictory","MiniGameEnded","MiniGameTimer","CommonTime","IsStartDelay","DrawFlashScreen","MiniGameDifficulty","difficultyTimeAdd","IsGameActive","GameFailed","IsGameTimeout","IsEndGameReport","RunGame","delta","timeElapsed","DrawProgressBar","ChatRoomRun","TimerRunInterval","MiniGameEnd","floor","MessMinigame","super","WetMinigame","clearData","mutateData","newData","noOp","abclData","loop","init","currentAccount","response","AccountName","shoelaceCSSLight","rel","href","head","shoelaceCSSDark","shoelaceScript","injectedStyles","screens","ServerPlayerSync","dataString","decompressFromBase64","modStorageObject","ModVersion","loadOrGenerateData","PreferenceRegisterExtensionSetting","Identifier","ButtonText","run","DrawBackNextButton","click","PreferenceSubscreenExtensionsExit","exit","load","initSettingsScreen","screen","CurrentModule","KeyUp","rest","functions","injectedScreenFunctions","ABCL_Loaded","then","C","CharX","CharY","Zoom","X","Y","clientWidth","clientHeight","setInterval"],"mappings":"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","x_google_ignoreList":[0,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99]}