var bcModSDK=function(){"use strict";const o="1.2.0";function e(o){alert("Mod ERROR:\n"+o);const e=new Error(o);throw console.error(e),e}const t=new TextEncoder;function n(o){return!!o&&"object"==typeof o&&!Array.isArray(o)}function r(o){const e=new Set;return o.filter((o=>!e.has(o)&&e.add(o)))}const i=new Map,a=new Set;function c(o){a.has(o)||(a.add(o),console.warn(o))}function s(o){const e=[],t=new Map,n=new Set;for(const r of f.values()){const i=r.patching.get(o.name);if(i){e.push(...i.hooks);for(const[e,a]of i.patches.entries())t.has(e)&&t.get(e)!==a&&c(`ModSDK: Mod '${r.name}' is patching function ${o.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${e}\nPatch1:\n${t.get(e)||""}\nPatch2:\n${a}`),t.set(e,a),n.add(r.name)}}e.sort(((o,e)=>e.priority-o.priority));const r=function(o,e){if(0===e.size)return o;let t=o.toString().replaceAll("\r\n","\n");for(const[n,r]of e.entries())t.includes(n)||c(`ModSDK: Patching ${o.name}: Patch ${n} not applied`),t=t.replaceAll(n,r);return(0,eval)(`(${t})`)}(o.original,t);let i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookChainExit)||void 0===i?void 0:i.call(t,o.name,n),c=r.apply(this,e);return null==a||a(),c};for(let t=e.length-1;t>=0;t--){const n=e[t],r=i;i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookEnter)||void 0===i?void 0:i.call(t,o.name,n.mod),c=n.hook.apply(this,[e,o=>{if(1!==arguments.length||!Array.isArray(e))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof o}`);return r.call(this,o)}]);return null==a||a(),c}}return{hooks:e,patches:t,patchesSources:n,enter:i,final:r}}function l(o,e=!1){let r=i.get(o);if(r)e&&(r.precomputed=s(r));else{let e=window;const a=o.split(".");for(let t=0;t<a.length-1;t++)if(e=e[a[t]],!n(e))throw new Error(`ModSDK: Function ${o} to be patched not found; ${a.slice(0,t+1).join(".")} is not object`);const c=e[a[a.length-1]];if("function"!=typeof c)throw new Error(`ModSDK: Function ${o} to be patched not found`);const l=function(o){let e=-1;for(const n of t.encode(o)){let o=255&(e^n);for(let e=0;e<8;e++)o=1&o?-306674912^o>>>1:o>>>1;e=e>>>8^o}return((-1^e)>>>0).toString(16).padStart(8,"0").toUpperCase()}(c.toString().replaceAll("\r\n","\n")),d={name:o,original:c,originalHash:l};r=Object.assign(Object.assign({},d),{precomputed:s(d),router:()=>{},context:e,contextProperty:a[a.length-1]}),r.router=function(o){return function(...e){return o.precomputed.enter.apply(this,[e])}}(r),i.set(o,r),e[r.contextProperty]=r.router}return r}function d(){for(const o of i.values())o.precomputed=s(o)}function p(){const o=new Map;for(const[e,t]of i)o.set(e,{name:e,original:t.original,originalHash:t.originalHash,sdkEntrypoint:t.router,currentEntrypoint:t.context[t.contextProperty],hookedByMods:r(t.precomputed.hooks.map((o=>o.mod))),patchedByMods:Array.from(t.precomputed.patchesSources)});return o}const f=new Map;function u(o){f.get(o.name)!==o&&e(`Failed to unload mod '${o.name}': Not registered`),f.delete(o.name),o.loaded=!1,d()}function g(o,t){o&&"object"==typeof o||e("Failed to register mod: Expected info object, got "+typeof o),"string"==typeof o.name&&o.name||e("Failed to register mod: Expected name to be non-empty string, got "+typeof o.name);let r=`'${o.name}'`;"string"==typeof o.fullName&&o.fullName||e(`Failed to register mod ${r}: Expected fullName to be non-empty string, got ${typeof o.fullName}`),r=`'${o.fullName} (${o.name})'`,"string"!=typeof o.version&&e(`Failed to register mod ${r}: Expected version to be string, got ${typeof o.version}`),o.repository||(o.repository=void 0),void 0!==o.repository&&"string"!=typeof o.repository&&e(`Failed to register mod ${r}: Expected repository to be undefined or string, got ${typeof o.version}`),null==t&&(t={}),t&&"object"==typeof t||e(`Failed to register mod ${r}: Expected options to be undefined or object, got ${typeof t}`);const i=!0===t.allowReplace,a=f.get(o.name);a&&(a.allowReplace&&i||e(`Refusing to load mod ${r}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),u(a));const c=o=>{let e=g.patching.get(o.name);return e||(e={hooks:[],patches:new Map},g.patching.set(o.name,e)),e},s=(o,t)=>(...n)=>{var i,a;const c=null===(a=(i=m.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(i,o,g.name);g.loaded||e(`Mod ${r} attempted to call SDK function after being unloaded`);const s=t(...n);return null==c||c(),s},p={unload:s("unload",(()=>u(g))),hookFunction:s("hookFunction",((o,t,n)=>{"string"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);"number"!=typeof t&&e(`Mod ${r} failed to hook function '${o}': Expected priority number, got ${typeof t}`),"function"!=typeof n&&e(`Mod ${r} failed to hook function '${o}': Expected hook function, got ${typeof n}`);const s={mod:g.name,priority:t,hook:n};return a.hooks.push(s),d(),()=>{const o=a.hooks.indexOf(s);o>=0&&(a.hooks.splice(o,1),d())}})),patchFunction:s("patchFunction",((o,t)=>{"string"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);n(t)||e(`Mod ${r} failed to patch function '${o}': Expected patches object, got ${typeof t}`);for(const[n,i]of Object.entries(t))"string"==typeof i?a.patches.set(n,i):null===i?a.patches.delete(n):e(`Mod ${r} failed to patch function '${o}': Invalid format of patch '${n}'`);d()})),removePatches:s("removePatches",(o=>{"string"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const t=l(o);c(t).patches.clear(),d()})),callOriginal:s("callOriginal",((o,t,n)=>{"string"==typeof o&&o||e(`Mod ${r} failed to call a function: Expected function name string, got ${typeof o}`);const i=l(o);return Array.isArray(t)||e(`Mod ${r} failed to call a function: Expected args array, got ${typeof t}`),i.original.apply(null!=n?n:globalThis,t)})),getOriginalHash:s("getOriginalHash",(o=>{"string"==typeof o&&o||e(`Mod ${r} failed to get hash: Expected function name string, got ${typeof o}`);return l(o).originalHash}))},g={name:o.name,fullName:o.fullName,version:o.version,repository:o.repository,allowReplace:i,api:p,loaded:!0,patching:new Map};return f.set(o.name,g),Object.freeze(p)}function h(){const o=[];for(const e of f.values())o.push({name:e.name,fullName:e.fullName,version:e.version,repository:e.repository});return o}let m;const y=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:o,apiVersion:1,registerMod:g,getModsInfo:h,getPatchingInfo:p,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return m=e,Object.freeze(e)}():(n(window.bcModSdk)||e("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&e(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==o&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);return"undefined"!=typeof exports&&(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=y),y}();

const modAPI = bcModSDK.registerMod({
    name: "UILib",
    fullName: "User Interface Library",
    version: "1.0",
    repository: "",
});

function copyCanvasArea(startCanvas, startX, startY, width, height, endCanvas, endX, endY) {
    // Get image data from the source canvas
    const imageData = startCanvas.getImageData(startX, startY, width, height);
    // Put image data into the target canvas
    endCanvas.putImageData(imageData, endX, endY);
}
class UILib {
    buttonsElement = null;
    settingsPage = null;
    mainCanvas = null;
    settingsCanvas = null;
    static async load() {
        UILib.settingsPage = document.querySelector("#settings");
        UILib.buttonsElement = UILib.settingsPage.querySelector("#buttons");
        UILib.mainCanvas = document.querySelector("#MainCanvas")
        UILib.settingsCanvas = document.querySelector("#settingsCanvas")
        UILib.loadSettingsButtons();
        await new Promise(resolve => setTimeout(resolve, 5000)); 
    }
    static async loadSettingsButtons() {
        let BCTicon = "data:image/png;base64,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"
        let lsgc = "data:image/png;base64,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"
        const exlusion = {"MBS_PreferenceScreen": {name: "MBS Settings", icon: "Icons/Maid.png"}, "BCTSettings": {name: "BCTweaks Settings", icon: BCTicon}, "LSCGMainMenu": {name: "LSCG Settings", icon: lsgc}}
        //		DrawButton(500 + 420 * Math.floor(A / 7), 160 + 110 * (A % 7), 400, 90, "", "White", "Icons/" + adjustedSubscreenList[A] + ".png");
        // DrawTextFit(TextGet("Homepage" + adjustedSubscreenList[A]), 745 + 420 * Math.floor(A / 7), 205 + 110 * (A % 7), 310, "Black"))
        const menuNames = Object.keys(PreferenceExtensionsSettings).length > 0 ? PreferenceSubscreenList.concat("Extensions") : PreferenceSubscreenList;
        
        for (let name of menuNames) {
            const buttonElement = document.createElement('button');
            const iconElement = document.createElement('img');
            const nameElement = document.createElement('span');
            iconElement.src = name === "Extensions" ? "Icons/Extensions.png" : "Icons/" + name + ".png";
            nameElement.innerHTML = TextGet("Homepage" + name);
            if (exlusion[name]) {
                iconElement.src = exlusion[name].icon;
                nameElement.innerHTML = exlusion[name].name;
            }
            
            iconElement.classList.add('icon');
            nameElement.classList.add('name');
            buttonElement.classList.add('button');
            buttonElement.classList.add('settings-button');
            buttonElement.classList.add('settings-button-' + name);
     
            buttonElement.appendChild(iconElement);
            buttonElement.appendChild(nameElement);
            
            buttonElement.addEventListener('click', () => {
                
                PreferenceSubscreen = name;
            });
            UILib.buttonsElement.appendChild(buttonElement);
        }
    }
    static async LoginDoLogin() {
        modAPI.hookFunction('LoginDoLogin', 1, (args, next) => {
                   
            next(args);
        }
        );
    }
    static async PreferenceLoad() {
        modAPI.hookFunction('PreferenceLoad', 1, (args, next) => {
            if (!UILib.settingsPage) {
                UILib.load();
            }
            UILib.settingsPage.classList.remove('hidden');
            let main = UILib.mainCanvas.getContext('2d');
            let setting = UILib.settingsCanvas.getContext('2d');
            // get the possition of settingsCanvas
            let settingsRect = UILib.settingsCanvas.getBoundingClientRect();

            copyCanvasArea(main, settingsRect.x,settingsRect.y, UILib.mainCanvas.width, UILib.mainCanvas.height, setting, 0, 0);
            next(args);
        }
        );
    }
    static async PreferenceExit() {
        modAPI.hookFunction('PreferenceExit', 1, (args, next) => {
            UILib.settingsPage.classList.add('hidden');
            next(args);
        }
        );
    }
}

//UILib.PreferenceLoad();
//UILib.PreferenceExit();